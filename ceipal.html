<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantum Pulse ATS - Complete Recruitment System</title>
    <meta name="description" content="Quantum Pulse ATS - Complete recruitment platform with AI resume parsing, candidate management, job postings, interview scheduling, and analytics.">
    <meta name="keywords" content="ATS, Applicant Tracking System, recruitment software, resume parsing, HR software, talent acquisition, hiring platform, candidate management">
    <meta name="author" content="Quantum Pulse Technologies">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://quantumpulse.com/">
    <meta property="og:title" content="Quantum Pulse ATS - Advanced Recruitment Platform">
    <meta property="og:description" content="AI-powered recruitment software for modern HR teams. Parse resumes, track candidates, schedule interviews, and analyze hiring metrics.">
    <meta property="og:image" content="https://quantumpulse.com/images/quantum-pulse-ats-og.jpg">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Quantum Pulse ATS - Recruitment Made Smarter">
    <meta name="twitter:description" content="Complete recruitment platform with AI resume parsing, candidate management, and analytics.">
    <meta name="twitter:image" content="https://quantumpulse.com/images/quantum-pulse-ats-twitter.jpg">
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "Quantum Pulse ATS",
      "applicationCategory": "BusinessApplication",
      "operatingSystem": "Web",
      "description": "Advanced Applicant Tracking System with AI resume parsing and recruitment automation",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "author": {
        "@type": "Organization",
        "name": "Quantum Pulse Technologies"
      },
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.8",
        "ratingCount": "156"
      }
    }
    </script>
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://quantumpulse.com/ats">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    
    <!-- ===== EXTERNAL DEPENDENCIES ===== -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
    <!-- PDF.js for PDF parsing -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>

    <!-- Optional: For Word document parsing -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.4.8/mammoth.browser.min.js"></script>

    <style>
        /* ===== CSS Variables ===== */
        :root {
            --primary: #00366f;
            --primary-light: #3b82f6;
            --primary-dark: #1e40af;
            --secondary: #f59e0b;
            --accent: #8b5cf6;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --info: #0ea5e9;
            --dark: #1e293b;
            --light: #f8fafc;
            --gray: #64748b;
            --gray-light: #e2e8f0;
            --gray-dark: #475569;
            
            --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-secondary: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --gradient-success: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            
            --border-radius: 16px;
            --border-radius-lg: 24px;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 25px 50px rgba(0, 0, 0, 0.2);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-fast: all 0.3s ease;
            
            --font-heading: 'Montserrat', sans-serif;
            --font-body: 'Poppins', sans-serif;
        }

        /* ===== Reset & Base Styles ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            font-size: 16px;
        }

        body {
            font-family: var(--font-body);
            background: white;
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* ===== Floating Particles ===== */
        .particles {
            position: fixed;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .particle {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            animation: float 20s infinite linear;
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0) rotate(0deg);
                opacity: 0.5;
            }
            50% {
                transform: translateY(-100px) rotate(180deg);
                opacity: 1;
            }
        }

        /* ===== Login Page Styles ===== */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        .login-box {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: var(--border-radius-lg);
            padding: 40px 30px;
            width: 100%;
            max-width: 480px;
            box-shadow: var(--shadow-xl);
            border: 1px solid rgba(255, 255, 255, 0.3);
            transform: translateY(0);
            animation: slideUp 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @media (max-width: 480px) {
            .login-box {
                padding: 30px 20px;
            }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .logo-section {
            text-align: center;
            margin-bottom: 40px;
        }

        .logo-circle {
            width: 80px;
            height: 80px;
            background: var(--gradient-primary);
            border-radius: 50%;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .logo-circle i {
            font-size: 36px;
            color: white;
        }

        .logo-section h1 {
            font-family: var(--font-heading);
            font-size: clamp(24px, 5vw, 32px);
            font-weight: 800;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 8px;
        }

        /* ===== Login Tabs ===== */
        .login-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            background: var(--gray-light);
            border-radius: 12px;
            padding: 6px;
        }

        .tab-btn {
            flex: 1;
            padding: 14px;
            border: none;
            background: transparent;
            border-radius: 8px;
            font-weight: 600;
            font-size: 15px;
            color: var(--gray);
            cursor: pointer;
            transition: var(--transition-fast);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .tab-btn.active {
            background: white;
            color: var(--primary);
            box-shadow: var(--shadow);
        }

        /* ===== Form Styles ===== */
        .form-container {
            animation: fadeIn 0.8s ease 0.6s both;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .form-content {
            display: none;
        }

        .form-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .form-group {
            margin-bottom: 24px;
            position: relative;
        }

        .form-label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--dark);
            font-size: 14px;
        }

        .input-with-icon {
            position: relative;
        }

        .input-with-icon i {
            position: absolute;
            left: 18px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
            font-size: 18px;
            transition: var(--transition-fast);
        }

        .form-input {
            width: 100%;
            padding: 16px 16px 16px 52px;
            border: 2px solid var(--gray-light);
            border-radius: 12px;
            font-size: 15px;
            font-weight: 500;
            background: white;
            transition: var(--transition-fast);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.1);
            transform: translateY(-2px);
        }

        .form-input:focus + i {
            color: var(--primary);
        }

        /* Error and Success Messages */
        .error-message {
            color: var(--danger);
            font-size: 12px;
            margin-top: 5px;
            display: none;
        }

        .success-message {
            color: var(--success);
            font-size: 12px;
            margin-top: 5px;
            display: none;
        }

        /* ===== Social Login Buttons ===== */
        .social-login {
            margin: 30px 0;
        }

        .social-divider {
            text-align: center;
            position: relative;
            margin: 25px 0;
            color: var(--gray);
            font-size: 14px;
        }

        .social-divider::before,
        .social-divider::after {
            content: '';
            position: absolute;
            top: 50%;
            width: 45%;
            height: 1px;
            background: var(--gray-light);
        }

        .social-divider::before {
            left: 0;
        }

        .social-divider::after {
            right: 0;
        }

        .social-buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .btn-social {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            padding: 16px;
            border: 2px solid var(--gray-light);
            border-radius: 12px;
            background: white;
            font-weight: 600;
            font-size: 15px;
            color: var(--dark);
            cursor: pointer;
            transition: var(--transition-fast);
        }

        .btn-social:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow);
            border-color: var(--primary);
        }

        .btn-social.google {
            background: white;
            color: #4285F4;
        }

        .btn-social.google:hover {
            background: #4285F4;
            color: white;
        }

        .btn-social.github {
            background: white;
            color: #333;
        }

        .btn-social.github:hover {
            background: #333;
            color: white;
        }

        .btn-social.linkedin {
            background: white;
            color: #0077B5;
        }

        .btn-social.linkedin:hover {
            background: #0077B5;
            color: white;
        }

        /* ===== Action Buttons ===== */
        .action-buttons {
            margin-top: 30px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .btn-primary {
            padding: 18px;
            background: var(--gradient-primary);
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: var(--transition-fast);
            box-shadow: var(--shadow);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        .btn-secondary {
            padding: 18px;
            background: transparent;
            color: var(--primary);
            border: 2px solid var(--primary);
            border-radius: 12px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: var(--transition-fast);
        }

        .btn-secondary:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-3px);
        }

        /* ===== Guest Mode ===== */
        .guest-section {
            margin: 30px 0;
            text-align: center;
        }

        .btn-guest {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 16px 30px;
            background: var(--gradient-success);
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            font-size: 15px;
            cursor: pointer;
            transition: var(--transition-fast);
            box-shadow: var(--shadow);
        }

        .btn-guest:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        /* ===== Dashboard Styles ===== */
        .dashboard-page {
            display: none;
            min-height: 100vh;
            background: #f1f5f9;
        }

        /* Mobile Menu Overlay */
        .mobile-menu-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }

        .mobile-menu-overlay.active {
            display: block;
        }

        /* Sidebar with Logo */
        .sidebar {
            width: 280px;
            background: linear-gradient(180deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            position: fixed;
            height: 100vh;
            box-shadow: var(--shadow);
            z-index: 1000;
            transition: transform 0.3s ease;
            overflow-y: auto;
        }

        @media (max-width: 1024px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
        }

        .sidebar-header {
            padding: 25px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .company-logo {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-width: 40px;
            background-color: white;
            border-radius: 10px;
            padding: 5px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .company-logo-img {
            width: 130px;
            height: 80px;
            object-fit: contain;
            border-radius: 8px;
        }

        .logo-text {
            flex: 1;
        }

        .logo-text h1 {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 2px;
            line-height: 1.2;
        }

        .company-name {
            font-size: 10px;
            opacity: 0.8;
            font-weight: 500;
            letter-spacing: 0.5px;
            color: rgba(255, 255, 255, 0.9);
        }

        .menu {
            list-style: none;
            padding: 20px 0;
        }

        .menu-item {
            padding: 15px 25px;
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: var(--transition);
            border-left: 4px solid transparent;
        }

        .menu-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }

        .menu-item.active {
            background: rgba(255, 255, 255, 0.15);
            border-left: 4px solid var(--secondary);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .menu-item i {
            margin-right: 12px;
            font-size: 18px;
            width: 24px;
            text-align: center;
        }

        .menu-text {
            font-size: 15px;
            font-weight: 500;
        }

        /* Mobile Menu Button */
        .mobile-menu-btn {
            display: none;
            background: var(--primary);
            color: white;
            border: none;
            width: 44px;
            height: 44px;
            border-radius: 10px;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 20px;
            margin-right: 15px;
            transition: var(--transition);
        }

        .mobile-menu-btn:hover {
            background: var(--primary-dark);
            transform: scale(1.05);
        }

        @media (max-width: 1024px) {
            .mobile-menu-btn {
                display: flex;
            }
        }

        /* Main Content */
        .main-content {
            margin-left: 280px;
            min-height: 100vh;
            transition: margin-left 0.3s ease;
        }

        @media (max-width: 1024px) {
            .main-content {
                margin-left: 0;
            }
        }

        /* Header */
        .header {
            background: white;
            padding: 20px 35px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
            flex-wrap: wrap;
            gap: 20px;
        }

        @media (max-width: 768px) {
            .header {
                padding: 15px 20px;
            }
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .header-left h2 {
            font-size: clamp(18px, 4vw, 24px);
            font-weight: 700;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .header-left h2 i {
            color: var(--primary);
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: clamp(15px, 3vw, 25px);
            flex-wrap: wrap;
        }

        /* Search Box */
        .search-box {
            position: relative;
            min-width: 250px;
        }

        @media (max-width: 768px) {
            .search-box {
                min-width: 200px;
                width: 100%;
                order: 3;
                margin-top: 10px;
            }
        }

        .search-box input {
            padding: 12px 20px 12px 45px;
            border: 1px solid var(--gray-light);
            border-radius: 10px;
            width: 100%;
            font-size: 14px;
            background: #f8fafc;
            transition: var(--transition);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .search-box input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
            background: white;
        }

        .search-box i {
            position: absolute;
            left: 18px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
        }

        /* Search Results Dropdown */
        .search-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-lg);
            margin-top: 10px;
            max-height: 400px;
            overflow-y: auto;
            display: none;
            z-index: 1000;
        }

        .search-results.active {
            display: block;
        }

        .search-result-item {
            padding: 15px 20px;
            border-bottom: 1px solid var(--gray-light);
            cursor: pointer;
            transition: var(--transition);
        }

        .search-result-item:hover {
            background: #f8fafc;
        }

        .search-result-header {
            padding: 15px 20px;
            background: #f8fafc;
            border-bottom: 1px solid var(--gray-light);
            font-weight: 600;
            color: var(--dark);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .search-result-category {
            font-size: 12px;
            color: var(--gray);
            text-transform: uppercase;
            font-weight: 600;
            margin-top: 5px;
        }

        /* User Actions */
        .user-actions {
            display: flex;
            align-items: center;
            gap: clamp(10px, 2vw, 20px);
        }

        .header-action-btn {
            position: relative;
            width: 44px;
            height: 44px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f8fafc;
            color: var(--gray);
            cursor: pointer;
            transition: var(--transition);
            border: none;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            flex-shrink: 0;
        }

        .header-action-btn:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .header-action-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: linear-gradient(135deg, var(--danger) 0%, #dc2626 100%);
            color: white;
            border-radius: 10px;
            width: 20px;
            height: 20px;
            font-size: 11px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            border: 2px solid white;
        }

        /* User Profile Dropdown */
        .user-profile {
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 10px;
            transition: var(--transition);
            position: relative;
            flex-shrink: 0;
        }

        .user-profile:hover {
            background: #f8fafc;
        }

        .user-avatar {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 18px;
            box-shadow: 0 4px 6px rgba(37, 99, 235, 0.2);
            flex-shrink: 0;
        }

        .user-info {
            display: flex;
            flex-direction: column;
        }

        .user-name {
            font-weight: 600;
            font-size: 15px;
        }

        .user-role {
            font-size: 12px;
            color: var(--gray);
            font-weight: 500;
        }

        .profile-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-lg);
            width: 250px;
            margin-top: 10px;
            display: none;
            z-index: 1000;
        }

        .profile-dropdown.visible {
            display: block;
        }

        .dropdown-header {
            padding: 20px;
            border-bottom: 1px solid var(--gray-light);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .dropdown-item {
            padding: 15px 20px;
            border-bottom: 1px solid var(--gray-light);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .dropdown-item:hover {
            background: #f8fafc;
        }

        .dropdown-item.logout {
            color: var(--danger);
        }

        /* Dashboard Content */
        .dashboard-content {
            padding: clamp(20px, 3vw, 30px);
        }

        /* Welcome Banner */
        .welcome-banner {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: clamp(20px, 3vw, 30px);
            border-radius: var(--border-radius);
            margin-bottom: 30px;
            box-shadow: var(--shadow-lg);
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            border-radius: var(--border-radius);
            padding: clamp(20px, 3vw, 25px);
            box-shadow: var(--shadow);
            transition: var(--transition);
            border: 1px solid transparent;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            border-color: var(--gray-light);
        }

        .stat-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            background: var(--primary);
            color: white;
            margin-bottom: 15px;
        }

        .stat-value {
            font-size: clamp(28px, 4vw, 32px);
            font-weight: 800;
            margin-bottom: 5px;
            color: var(--dark);
        }

        /* Quick Actions */
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .action-card {
            background: white;
            border-radius: var(--border-radius);
            padding: clamp(20px, 3vw, 25px);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow);
        }

        .action-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            background: var(--primary);
            color: white;
        }

        .action-icon {
            font-size: 32px;
            margin-bottom: 15px;
            color: var(--primary);
        }

        .action-card:hover .action-icon {
            color: white;
        }

        /* Main Grid */
        .main-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }

        /* Tables */
        .table-card {
            background: white;
            border-radius: var(--border-radius);
            padding: clamp(20px, 3vw, 25px);
            box-shadow: var(--shadow);
        }

        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .table-container {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            min-width: 600px;
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid var(--gray-light);
        }

        th {
            font-weight: 600;
            color: var(--dark);
            background: #f8fafc;
        }

        tr:hover {
            background: #f8fafc;
        }

        /* Status Badges */
        .status-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-active {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
        }

        .status-pending {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning);
        }

        .status-closed {
            background: rgba(239, 68, 68, 0.1);
            color: var(--danger);
        }

        /* Buttons */
        .btn {
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            font-size: 14px;
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }

        .btn-outline:hover {
            background: var(--primary);
            color: white;
        }

        .btn-sm {
            padding: 5px 10px;
            font-size: 12px;
        }

        /* Page System */
        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        /* Job Postings Page */
        .jobs-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            background: white;
            padding: clamp(20px, 3vw, 25px);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            flex-wrap: wrap;
            gap: 20px;
        }

        .filters-container {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .filter-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .filter-select {
            padding: 10px 15px;
            border: 2px solid var(--gray-light);
            border-radius: 8px;
            background: white;
            font-family: var(--font-body);
            font-size: 14px;
            min-width: 150px;
        }

        .filter-select:focus {
            outline: none;
            border-color: var(--primary);
        }

        /* View Toggle */
        .view-toggle {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .view-toggle-btn {
            background: #f8fafc;
            border: 2px solid var(--gray-light);
            border-radius: 8px;
            padding: 10px 15px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
        }

        .view-toggle-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* Job Cards Grid View */
        .jobs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(min(350px, 100%), 1fr));
            gap: 25px;
        }

        .job-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--shadow);
            transition: var(--transition);
            border: 1px solid transparent;
        }

        .job-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            border-color: var(--gray-light);
        }

        .job-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .job-code {
            font-size: 14px;
            color: var(--gray);
            font-weight: 600;
            background: #f8fafc;
            padding: 4px 10px;
            border-radius: 20px;
        }

        .job-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 10px;
        }

        .job-meta {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            color: var(--gray);
            font-size: 14px;
            flex-wrap: wrap;
        }

        .job-meta-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .job-description {
            color: var(--gray-dark);
            line-height: 1.6;
            margin-bottom: 20px;
            font-size: 14px;
            max-height: 60px;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
        }

        .job-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-top: 15px;
            border-top: 1px solid var(--gray-light);
        }

        .applications-count {
            font-weight: 600;
            color: var(--dark);
        }

        .job-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        /* Job List View */
        .jobs-list {
            display: none;
        }

        .jobs-list.active {
            display: block;
        }

        .job-list-item {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 15px;
            box-shadow: var(--shadow);
            transition: var(--transition);
            border-left: 4px solid var(--primary);
        }

        .job-list-item:hover {
            transform: translateX(5px);
            box-shadow: var(--shadow-lg);
        }

        .job-list-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .job-list-meta {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
            color: var(--gray);
            font-size: 14px;
            flex-wrap: wrap;
        }

        /* Toast Notifications */
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
        }

        .toast {
            background: white;
            border-radius: var(--border-radius);
            padding: 15px 20px;
            margin-bottom: 10px;
            box-shadow: var(--shadow-lg);
            display: flex;
            align-items: center;
            gap: 15px;
            transform: translateX(100%);
            opacity: 0;
            animation: slideIn 0.3s forwards;
        }

        @keyframes slideIn {
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .import-progress-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
}

.import-progress-card {
    background: var(--card-bg);
    border-radius: 12px;
    padding: 24px;
    width: 400px;
    max-width: 90%;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    border: 1px solid var(--border-color);
}

.import-progress-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 20px;
}

.import-progress-header i {
    font-size: 24px;
    color: var(--primary);
}

.import-progress-header h4 {
    margin: 0;
    color: var(--text-primary);
}

.import-progress-body {
    margin-top: 16px;
}

.progress-bar {
    width: 100%;
    height: 8px;
    background: var(--border-color);
    border-radius: 4px;
    overflow: hidden;
    margin-bottom: 8px;
}

.progress-fill {
    height: 100%;
    background: var(--primary);
    border-radius: 4px;
    transition: width 0.3s ease;
}

.progress-text {
    display: flex;
    justify-content: space-between;
    font-size: 14px;
    color: var(--text-secondary);
}

.fade-out {
    opacity: 0;
    transition: opacity 0.3s ease;
}
        /* Video Call Modal */
        .video-call-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .video-call-container {
            background: white;
            border-radius: var(--border-radius);
            width: 100%;
            max-width: 1200px;
            height: 90vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        @media (max-width: 768px) {
            .video-call-container {
                height: 80vh;
            }
        }

        /* Settings Page Styles */
        .settings-container {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 30px;
        }

        @media (max-width: 1024px) {
            .settings-container {
                grid-template-columns: 1fr;
            }
            
            .settings-sidebar {
                display: none;
            }
            
            .settings-sidebar.active {
                display: block;
                position: fixed;
                top: 0;
                left: 0;
                width: 280px;
                height: 100vh;
                background: white;
                z-index: 1001;
                padding: 20px;
                box-shadow: var(--shadow-lg);
            }
        }

        .settings-sidebar {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--shadow);
        }

        .settings-nav {
            list-style: none;
        }

        .settings-nav-item {
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .settings-nav-item:hover,
        .settings-nav-item.active {
            background: var(--primary);
            color: white;
        }

        .settings-content {
            background: white;
            border-radius: var(--border-radius);
            padding: 30px;
            box-shadow: var(--shadow);
        }

        @media (max-width: 768px) {
            .settings-content {
                padding: 20px;
            }
        }

        .settings-section {
            display: none;
        }

        .settings-section.active {
            display: block;
        }

        .settings-group {
            margin-bottom: 30px;
        }

        .settings-group h3 {
            margin-bottom: 20px;
            color: var(--dark);
            font-size: 18px;
            border-bottom: 2px solid var(--gray-light);
            padding-bottom: 10px;
        }

        .settings-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid var(--gray-light);
            flex-wrap: wrap;
            gap: 15px;
        }

        @media (max-width: 768px) {
            .settings-item {
                flex-direction: column;
                align-items: stretch;
            }
        }

        .setting-label {
            font-weight: 500;
            color: var(--dark);
            flex: 1;
            min-width: 200px;
        }

        .setting-control {
            display: flex;
            align-items: center;
            gap: 15px;
            flex: 1;
            min-width: 250px;
        }

        /* Toggle Switch for Settings */
        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: var(--primary);
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        /* Video Call Interface */
        .video-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            height: 100%;
            padding: 20px;
        }

        .video-participant {
            background: #1a1a1a;
            border-radius: var(--border-radius);
            overflow: hidden;
            position: relative;
            min-height: 300px;
        }

        .video-controls {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 15px;
            z-index: 10;
            flex-wrap: wrap;
            justify-content: center;
        }

        .control-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.5);
            border: none;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            transition: var(--transition);
            flex-shrink: 0;
        }

        .control-btn:hover {
            background: rgba(0, 0, 0, 0.7);
            transform: scale(1.1);
        }

        .control-btn.end-call {
            background: var(--danger);
        }

        /* Switch User Modal */
        .switch-user-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .switch-user-content {
            background: white;
            border-radius: var(--border-radius);
            padding: 30px;
            width: 100%;
            max-width: 500px;
            box-shadow: var(--shadow-xl);
        }

        /* Form Styles for Modals */
        .modal-form-group {
            margin-bottom: 20px;
        }

        .modal-form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark);
        }

        .modal-form-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--gray-light);
            border-radius: 8px;
            font-family: var(--font-body);
            font-size: 14px;
            transition: var(--transition);
        }

        .modal-form-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .modal-form-textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--gray-light);
            border-radius: 8px;
            font-family: var(--font-body);
            font-size: 14px;
            resize: vertical;
            min-height: 100px;
            transition: var(--transition);
        }

        .modal-form-textarea:focus {
            outline: none;
            border-color: var(--primary);
        }

        .modal-form-select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--gray-light);
            border-radius: 8px;
            font-family: var(--font-body);
            font-size: 14px;
            background: white;
            transition: var(--transition);
        }

        .modal-form-select:focus {
            outline: none;
            border-color: var(--primary);
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        /* Notifications Modal */
        .notifications-modal {
            display: none;
            position: fixed;
            top: 80px;
            right: 20px;
            width: 350px;
            max-width: 90vw;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-lg);
            z-index: 1001;
            max-height: 400px;
            overflow-y: auto;
        }

        .notifications-modal.active {
            display: block;
        }

        /* Candidates Form */
        .candidate-form-container {
            background: white;
            border-radius: var(--border-radius);
            padding: 30px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }

        /* Reports Section */
        .reports-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .report-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--shadow);
            cursor: pointer;
            transition: var(--transition);
        }

        .report-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .report-icon {
            font-size: 32px;
            color: var(--primary);
            margin-bottom: 15px;
        }

        /* Charts */
        .chart-container {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
            height: 400px;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
        }

        .empty-state i {
            font-size: 64px;
            color: var(--gray-light);
            margin-bottom: 20px;
        }

        .empty-state h3 {
            color: var(--dark);
            margin-bottom: 10px;
            font-size: 24px;
        }

        .empty-state p {
            color: var(--gray);
            margin-bottom: 30px;
            font-size: 16px;
        }

        /* Loading Spinner */
        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 4px solid white;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-right: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Mobile Settings Toggle */
        .mobile-settings-toggle {
            display: none;
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            margin-bottom: 20px;
            width: 100%;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }

        @media (max-width: 1024px) {
            .mobile-settings-toggle {
                display: flex;
            }
        }

        /* Close button for mobile sidebar */
        .close-sidebar-btn {
            display: none;
            background: none;
            border: none;
            color: var(--dark);
            font-size: 24px;
            cursor: pointer;
            position: absolute;
            top: 20px;
            right: 20px;
        }

        @media (max-width: 1024px) {
            .close-sidebar-btn {
                display: block;
            }
        }

        /* Responsive Typography */
        @media (max-width: 768px) {
            h2 {
                font-size: 20px;
            }
            
            h3 {
                font-size: 18px;
            }
            
            .stat-value {
                font-size: 24px;
            }
        }

        /* Print Styles */
        @media print {
            .sidebar, .header, .btn, .action-card, .view-toggle {
                display: none !important;
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .page {
                display: block !important;
            }
        }

        /* ===== NEW RESUME PARSING STYLES ===== */
        
        /* Resume Upload Container */
        .resume-upload-container {
            background: white;
            border-radius: var(--border-radius);
            padding: 30px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }

        .upload-methods {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .upload-method {
            background: #f8fafc;
            border: 2px solid var(--gray-light);
            border-radius: 12px;
            padding: 25px 20px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .upload-method:hover {
            border-color: var(--primary);
            transform: translateY(-5px);
            box-shadow: var(--shadow);
        }

        .upload-method i {
            font-size: 36px;
            color: var(--primary);
            margin-bottom: 15px;
        }

        /* Bulk Upload Zone */
        .bulk-upload-zone {
            border: 3px dashed var(--gray-light);
            border-radius: var(--border-radius);
            padding: 50px 30px;
            text-align: center;
            background: #f8f9fa;
            cursor: pointer;
            transition: var(--transition);
            margin-bottom: 20px;
        }

        .bulk-upload-zone:hover {
            border-color: var(--primary);
            background: rgba(37, 99, 235, 0.05);
        }

        .bulk-upload-zone i {
            font-size: 64px;
            color: var(--primary);
            margin-bottom: 20px;
            opacity: 0.8;
        }

        .bulk-upload-zone h3 {
            margin-bottom: 10px;
            color: var(--dark);
        }

        .bulk-upload-zone p {
            color: var(--gray);
            margin-bottom: 15px;
        }

        /* File List */
        .file-list-container {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            margin-top: 30px;
            box-shadow: var(--shadow);
        }

        .file-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px;
            border-bottom: 1px solid var(--gray-light);
            transition: var(--transition);
        }

        .file-item:hover {
            background: #f8f9fa;
        }

        .file-info {
            display: flex;
            align-items: center;
            gap: 15px;
            flex: 1;
        }

        .file-icon {
            width: 50px;
            height: 50px;
            background: var(--gradient-primary);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
        }

        .file-details {
            flex: 1;
        }

        .file-name {
            font-weight: 500;
            margin-bottom: 5px;
        }

        .file-size {
            color: var(--gray);
            font-size: 14px;
        }

        .file-status {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }

        .status-pending {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning);
        }

        .status-processing {
            background: rgba(59, 130, 246, 0.1);
            color: var(--primary);
        }

        .status-completed {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
        }

        .status-error {
            background: rgba(239, 68, 68, 0.1);
            color: var(--danger);
        }

        /* Progress Bar */
        .progress-container {
            margin: 20px 0;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .progress-bar {
            height: 8px;
            background: var(--gray-light);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient-success);
            width: 0%;
            transition: width 0.3s ease;
        }

        /* AI Parsing Results */
        .ai-results {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            margin-top: 30px;
            box-shadow: var(--shadow);
        }

        .parsed-field {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .field-label {
            font-size: 12px;
            color: var(--gray);
            margin-bottom: 5px;
            text-transform: uppercase;
            font-weight: 600;
        }

        .field-value {
            font-weight: 500;
            color: var(--dark);
        }

        /* Duplicate Detection */
        .duplicate-warning {
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid var(--warning);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .duplicate-warning i {
            color: var(--warning);
            font-size: 20px;
        }

        /* Bulk Actions */
        .bulk-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        /* Resume Preview */
        .resume-preview {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            margin-top: 20px;
            box-shadow: var(--shadow);
            max-height: 400px;
            overflow-y: auto;
        }

        .preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--gray-light);
        }

        .preview-content {
            line-height: 1.6;
            color: var(--gray-dark);
        }

        /* Quick Stats */
        .quick-stats {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .quick-stat {
            background: white;
            border-radius: 12px;
            padding: 15px;
            flex: 1;
            min-width: 150px;
            box-shadow: var(--shadow);
        }

        .quick-stat i {
            font-size: 24px;
            color: var(--primary);
            margin-bottom: 10px;
        }

        /* Tabs for Resume Parsing */
        .resume-tabs {
            display: flex;
            border-bottom: 1px solid var(--gray-light);
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .resume-tab {
            padding: 15px 25px;
            background: none;
            border: none;
            font-family: var(--font-body);
            font-weight: 500;
            color: var(--gray);
            cursor: pointer;
            position: relative;
            transition: var(--transition);
        }

        .resume-tab:hover {
            color: var(--primary);
        }

        .resume-tab.active {
            color: var(--primary);
        }

        .resume-tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--primary);
        }

        .resume-tab-content {
            display: none;
        }

        .resume-tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
    </style>
</head>
<body>
    <!-- Animated Particles -->
    <div class="particles" id="particles"></div>

    <!-- ===== LOGIN PAGE ===== -->
    <div class="login-container" id="loginPage">
        <div class="login-box">
            <div class="logo-section">
                <div class="logo-circle">
                    <i class="fas fa-user-tie"></i>
                </div>
                <h1>Quantum Pulse ATS</h1>
                <p>Advanced Recruitment Platform</p>
            </div>

            <!-- Login Tabs -->
            <div class="login-tabs">
                <button class="tab-btn active" data-tab="login">
                    <i class="fas fa-sign-in-alt"></i> Login
                </button>
                <button class="tab-btn" data-tab="register">
                    <i class="fas fa-user-plus"></i> Register
                </button>
            </div>

            <!-- Update this section in the login form -->
                <div class="form-content active" id="loginForm">
                    <form id="loginFormContent" onsubmit="loginUserDirect(event)">
                        <div class="form-group">
                            <label class="form-label">Email Address</label>
                            <div class="input-with-icon">
                                <input type="email" class="form-input" id="loginEmail" placeholder="admin@quantumpulse.com" required>
                                <i class="fas fa-envelope"></i>
                            </div>
                            <div class="error-message" id="loginEmailError"></div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Password</label>
                            <div class="input-with-icon">
                                <input type="password" class="form-input" id="loginPassword" placeholder="Admin@123" required>
                                <i class="fas fa-lock"></i>
                            </div>
                            <div class="error-message" id="loginPasswordError"></div>
                        </div>

                        <div class="success-message" id="loginSuccess"></div>

                        <!-- Social Login -->
                <div class="social-login">
                    <div class="social-divider">Or continue with</div>
                    <div class="social-buttons">
                        <button type="button" class="btn-social google" onclick="loginWithGoogle()">
                            <i class="fab fa-google"></i> Google Account
                        </button>
                        <button type="button" class="btn-social linkedin" onclick="loginWithLinkedIn()">
                            <i class="fab fa-linkedin"></i> LinkedIn
                        </button>
                        <button type="button" class="btn-social github" onclick="loginWithGitHub()">
                            <i class="fab fa-github"></i> GitHub
                        </button>
                    </div>
                </div>

                <!-- Guest Mode -->
                <div class="guest-section">
                    <button type="button" class="btn-guest" onclick="enterGuestMode()">
                        <i class="fas fa-user-clock"></i> Enter as Guest
                    </button>
                </div>

                <!-- Quick Demo Button -->
                <div class="guest-section" style="margin-top: 15px;">
                    <button type="button" class="btn-guest" style="background: var(--gradient-secondary);" onclick="quickDemoLogin()">
                        <i class="fas fa-rocket"></i> Quick Demo (Admin)
                    </button>
                </div>
            </div> 
        </form> 
    </div>
    
                <!-- Registration Form -->
                <div class="form-content" id="registerForm">
                   <form id="registerFormContent" onsubmit="return handleRegistration(event)">
                        <div class="form-group">
                            <label class="form-label">Full Name</label>
                            <div class="input-with-icon">
                                <input type="text" class="form-input" id="registerName" placeholder="Enter your full name" required>
                                <i class="fas fa-user"></i>
                            </div>
                            <div class="error-message" id="registerNameError"></div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Email Address</label>
                            <div class="input-with-icon">
                                <input type="email" class="form-input" id="registerEmail" placeholder="Enter your email" required>
                                <i class="fas fa-envelope"></i>
                            </div>
                            <div class="error-message" id="registerEmailError"></div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Password</label>
                            <div class="input-with-icon">
                                <input type="password" class="form-input" id="registerPassword" placeholder="Create a strong password" required>
                                <i class="fas fa-lock"></i>
                            </div>
                            <div class="error-message" id="registerPasswordError"></div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Confirm Password</label>
                            <div class="input-with-icon">
                                <input type="password" class="form-input" id="registerConfirmPassword" placeholder="Confirm your password" required>
                                <i class="fas fa-lock"></i>
                            </div>
                            <div class="error-message" id="registerConfirmError"></div>
                        </div>

                        <div class="success-message" id="registerSuccess"></div>

                        <div class="action-buttons">
                            <button type="submit" class="btn-primary" id="registerBtn">
                                Create Account
                            </button>
                            <button type="button" class="btn-secondary" onclick="switchToTab('login')">
                                Already have an account? Login
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- ===== DASHBOARD ===== -->
    <div class="dashboard-page" id="dashboardPage">
        <!-- Mobile Menu Overlay -->
        <div class="mobile-menu-overlay" id="mobileMenuOverlay"></div>

        <!-- Sidebar with Logo -->
        <div class="sidebar" id="sidebar">
            <button class="close-sidebar-btn" id="closeSidebarBtn"></button>
            <div class="sidebar-header">
                <div class="company-logo">
                    <!-- Logo Image -->
                    <img src="/images/Quantum-pulse-Technologies-logo.png " 
                        alt="Quantum Pulse ATS Logo" 
                        style="width: 130px; height: 80px; object-fit: contain;">
                </div>
                <div class="logo-text">
                    <h1>QP ATS</h1>
                </div>
            </div>
            
            <ul class="menu">
                <li class="menu-item active" data-page="dashboard">
                    <i class="fas fa-th-large"></i>
                    <span class="menu-text">Dashboard</span>
                </li>
                <li class="menu-item" data-page="jobs">
                    <i class="fas fa-briefcase"></i>
                    <span class="menu-text">Job Postings</span>
                </li>
                <li class="menu-item" data-page="candidates">
                    <i class="fas fa-users"></i>
                    <span class="menu-text">Candidates</span>
                </li>
                <!-- NEW: Resume Parsing Menu Items -->
                <li class="menu-item" data-page="resume-upload">
                    <i class="fas fa-upload"></i>
                    <span class="menu-text">Resume Upload</span>
                </li>
                <li class="menu-item" data-page="resume-parse">
                    <i class="fas fa-file-alt"></i>
                    <span class="menu-text">Parse Resumes</span>
                </li>
                <!-- END NEW -->
                <li class="menu-item" data-page="interviews">
                    <i class="fas fa-calendar-alt"></i>
                    <span class="menu-text">Interviews</span>
                </li>
                <li class="menu-item" data-page="reports">
                    <i class="fas fa-chart-bar"></i>
                    <span class="menu-text">Reports</span>
                </li>
                <li class="menu-item" data-page="settings">
                    <i class="fas fa-cog"></i>
                    <span class="menu-text">Settings</span>
                </li>
            </ul>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Header -->
            <div class="header">
                <div class="header-left">
                    <button class="mobile-menu-btn" id="mobileMenuBtn">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h2 id="pageTitle"><i class="fas fa-th-large"></i> Dashboard</h2>
                </div>
                <div class="header-right">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="searchInput" placeholder="Search jobs, candidates, reports..." onkeyup="handleSearchInput(event)">
                        <div class="search-results" id="searchResults">
                            <!-- Search results will be dynamically inserted here -->
                        </div>
                    </div>
                    
                    <div class="user-actions">
                        <button class="header-action-btn" onclick="toggleNotifications()">
                            <i class="far fa-bell"></i>
                            <span class="header-action-badge" id="notificationBadge">3</span>
                        </button>
                        
                        <button class="header-action-btn" onclick="startVideoCall()">
                            <i class="fas fa-video"></i>
                            <span class="header-action-badge" id="callBadge">1</span>
                        </button>
                        
                        <div class="user-profile" onclick="toggleProfileDropdown()">
                            <div class="user-avatar" id="userAvatar">AD</div>
                            <div class="user-info">
                                <div class="user-name" id="userName">Admin User</div>
                                <div class="user-role" id="userRole">Administrator</div>
                            </div>
                            <i class="fas fa-chevron-down"></i>
                            
                            <!-- Profile Dropdown -->
                            <div class="profile-dropdown" id="profileDropdown">
                                <div class="dropdown-header">
                                    <div class="user-avatar" id="dropdownAvatar">AD</div>
                                    <div>
                                        <strong id="dropdownName">Admin User</strong>
                                        <div id="dropdownRole">Administrator</div>
                                    </div>
                                </div>
                                <div class="dropdown-item" onclick="showSwitchUserModal()">
                                    <i class="fas fa-exchange-alt"></i> Switch User
                                </div>
                                <div class="dropdown-item" onclick="showProfile()">
                                    <i class="fas fa-user"></i> My Profile
                                </div>
                                <div class="dropdown-item" onclick="showSettings()">
                                    <i class="fas fa-cog"></i> Settings
                                </div>
                                <div class="dropdown-item logout" onclick="logout()">
                                    <i class="fas fa-sign-out-alt"></i> Logout
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Dashboard Content -->
            <div class="dashboard-content">
                <!-- Dashboard Page -->
                <div id="dashboardPageContent" class="page active">
                    <!-- Welcome Banner -->
                    <div class="welcome-banner">
                        <h2 style="margin-bottom: 10px;">Welcome back, <span id="greetingName">Admin</span>! </h2>
                        <p>Here's what's happening with your recruitment today.</p>
                    </div>

                    <!-- Stats Grid -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-briefcase"></i>
                            </div>
                            <div class="stat-value" id="activeJobs">0</div>
                            <div>Active Jobs</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stat-value" id="totalCandidates">0</div>
                            <div>Total Candidates</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-calendar-check"></i>
                            </div>
                            <div class="stat-value" id="interviewsToday">0</div>
                            <div>Interviews Today</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-user-check"></i>
                            </div>
                            <div class="stat-value" id="hiredThisMonth">0</div>
                            <div>Hired This Month</div>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="quick-actions">
                        <div class="action-card" onclick="createNewJob()">
                            <div class="action-icon">
                                <i class="fas fa-plus"></i>
                            </div>
                            <h4>Post New Job</h4>
                            <p>Create and publish job openings</p>
                        </div>
                        <div class="action-card" onclick="addNewCandidate()">
                            <div class="action-icon">
                                <i class="fas fa-user-plus"></i>
                            </div>
                            <h4>Add Candidate</h4>
                            <p>Add new candidates</p>
                        </div>
                        <div class="action-card" onclick="quickResumeUpload()">
                            <div class="action-icon">
                                <i class="fas fa-file-upload"></i>
                            </div>
                            <h4>Upload Resume</h4>
                            <p>Parse and add resumes</p>
                        </div>
                        <div class="action-card" onclick="scheduleInterview()">
                            <div class="action-icon">
                                <i class="fas fa-calendar-plus"></i>
                            </div>
                            <h4>Schedule Interview</h4>
                            <p>Plan new interviews</p>
                        </div>
                    </div>

                    <!-- Main Grid -->
                    <div class="main-grid">
                        <!-- Recent Activity -->
                        <div class="table-card">
                            <div class="table-header">
                                <h3>Recent Job Postings</h3>
                                <button class="btn btn-outline" onclick="viewAllJobs()">View All</button>
                            </div>
                            <div class="table-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Job Code</th>
                                            <th>Title</th>
                                            <th>Applications</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="jobsTable">
                                        <!-- Jobs loaded here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Upcoming Interviews -->
                        <div class="table-card">
                            <div class="table-header">
                                <h3>Upcoming Interviews</h3>
                                <button class="btn btn-outline" onclick="viewAllInterviews()">View All</button>
                            </div>
                            <div class="table-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Candidate</th>
                                            <th>Time</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="interviewsTable">
                                        <!-- Interviews loaded here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Resume Upload Page (NEW) -->
                <div id="resumeUploadPage" class="page">
                    <div class="jobs-header">
                        <div>
                            <h2 style="margin-bottom: 5px;">Resume Upload</h2>
                            <p>Upload resumes using various methods</p>
                        </div>
                        <button class="btn-primary" onclick="showBulkUploadModal()">
                            <i class="fas fa-upload"></i> Bulk Upload
                        </button>
                    </div>

                    <!-- Quick Stats -->
                    <div class="quick-stats">
                        <div class="quick-stat">
                            <i class="fas fa-file-upload"></i>
                            <div class="stat-value" id="totalUploaded">0</div>
                            <div>Total Uploaded</div>
                        </div>
                        <div class="quick-stat">
                            <i class="fas fa-clock"></i>
                            <div class="stat-value" id="pendingParsing">0</div>
                            <div>Pending Parsing</div>
                        </div>
                        <div class="quick-stat">
                            <i class="fas fa-check-circle"></i>
                            <div class="stat-value" id="parsedSuccess">0</div>
                            <div>Successfully Parsed</div>
                        </div>
                        <div class="quick-stat">
                            <i class="fas fa-database"></i>
                            <div class="stat-value" id="storageUsed">0 MB</div>
                            <div>Storage Used</div>
                        </div>
                    </div>

                    <!-- Upload Methods -->
                    <div class="resume-upload-container">
                        <h3 style="margin-bottom: 20px;">Choose Upload Method</h3>
                        <div class="upload-methods">
                            <div class="upload-method" onclick="showUploadModal('single')">
                                <i class="fas fa-file-upload"></i>
                                <h4>Single Upload</h4>
                                <p>Upload individual resume files</p>
                            </div>
                            <div class="upload-method" onclick="showUploadModal('bulk')">
                                <i class="fas fa-layer-group"></i>
                                <h4>Bulk Upload</h4>
                                <p>Upload multiple files at once</p>
                            </div>
                            <div class="upload-method" onclick="showUploadModal('dropbox')">
                                <i class="fab fa-dropbox"></i>
                                <h4>Dropbox</h4>
                                <p>Import from Dropbox</p>
                            </div>
                            <div class="upload-method" onclick="showUploadModal('onedrive')">
                                <i class="fab fa-microsoft"></i>
                                <h4>OneDrive</h4>
                                <p>Import from OneDrive</p>
                            </div>
                        </div>
                    </div>

                    <!-- Bulk Upload Zone -->
                    <div class="bulk-upload-zone" onclick="document.getElementById('bulkFileInput').click()">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <h3>Drag & Drop or Click to Upload</h3>
                        <p>Upload up to 1000+ resume files at once</p>
                        <p style="font-size: 14px; color: var(--gray);">Supported formats: PDF, DOC, DOCX, TXT, RTF</p>
                        <input type="file" id="bulkFileInput" multiple accept=".pdf,.doc,.docx,.txt,.rtf" style="display: none;" onchange="handleBulkUpload(event)">
                    </div>

                    <!-- Progress Container -->
                    <div class="progress-container" id="uploadProgress" style="display: none;">
                        <div class="progress-header">
                            <span>Uploading files...</span>
                            <span id="progressPercentage">0%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                        <div style="text-align: center; margin-top: 10px; font-size: 14px; color: var(--gray);">
                            <span id="uploadStatus">Processing...</span>
                        </div>
                    </div>

                    <!-- File List -->
                    <div class="file-list-container" id="fileListContainer">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h3>Uploaded Files</h3>
                            <div class="bulk-actions">
                                <button class="btn btn-outline btn-sm" onclick="clearAllFiles()">
                                    <i class="fas fa-trash"></i> Clear All
                                </button>
                                <button class="btn btn-primary btn-sm" onclick="startParsingAll()">
                                    <i class="fas fa-play"></i> Parse All
                                </button>
                            </div>
                        </div>
                        <div id="fileList">
                            <!-- Files will be loaded here -->
                        </div>
                    </div>
                </div>

                <!-- Resume Parse Page (NEW) -->
                <div id="resumeParsePage" class="page">
                    <div class="jobs-header">
                        <div>
                            <h2 style="margin-bottom: 5px;">Resume Parsing</h2>
                            <p>AI-powered resume parsing and data extraction</p>
                        </div>
                        <button class="btn-primary" onclick="startAIParsing()">
                            <i class="fas fa-robot"></i> AI Parse All
                        </button>
                    </div>

                    <!-- Resume Tabs -->
                    <div class="resume-tabs">
                        <button class="resume-tab active" data-tab="pending">Pending Parsing</button>
                        <button class="resume-tab" data-tab="processing">Processing</button>
                        <button class="resume-tab" data-tab="completed">Completed</button>
                        <button class="resume-tab" data-tab="errors">Errors</button>
                    </div>

                    <!-- Pending Parsing Tab -->
                    <div id="pendingTab" class="resume-tab-content active">
                        <div class="table-card">
                            <div class="table-header">
                                <h3>Files Pending Parsing</h3>
                                <div style="display: flex; gap: 10px;">
                                    <select class="filter-select" id="pendingFilter" onchange="filterPendingFiles()">
                                        <option value="">All Types</option>
                                        <option value="pdf">PDF</option>
                                        <option value="doc">DOC</option>
                                        <option value="docx">DOCX</option>
                                        <option value="txt">TXT</option>
                                    </select>
                                    <button class="btn btn-success" onclick="parseSelectedFiles()">
                                        <i class="fas fa-cog"></i> Parse Selected
                                    </button>
                                </div>
                            </div>
                            <div class="table-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th><input type="checkbox" id="selectAllPending" onchange="toggleAllPending()"></th>
                                            <th>File Name</th>
                                            <th>Size</th>
                                            <th>Type</th>
                                            <th>Upload Date</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="pendingFilesTable">
                                        <!-- Pending files will be loaded here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Processing Tab -->
                    <div id="processingTab" class="resume-tab-content">
                        <div class="table-card">
                            <div class="table-header">
                                <h3>Files Being Processed</h3>
                                <div class="progress-container">
                                    <div class="progress-header">
                                        <span>Overall Progress</span>
                                        <span id="overallProgress">0%</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="overallProgressFill"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="table-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>File Name</th>
                                            <th>Progress</th>
                                            <th>Time Elapsed</th>
                                            <th>Estimated Time</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="processingFilesTable">
                                        <!-- Processing files will be loaded here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Completed Tab -->
                    <div id="completedTab" class="resume-tab-content">
                        <div class="table-card">
                            <div class="table-header">
                                <h3>Successfully Parsed Files</h3>
                                <div style="display: flex; gap: 10px;">
                                    <button class="btn btn-outline" onclick="exportParsedData()">
                                        <i class="fas fa-download"></i> Export Data
                                    </button>
                                    <button class="btn btn-primary" onclick="importToDatabase()">
                                        <i class="fas fa-database"></i> Import to DB
                                    </button>
                                </div>
                            </div>
                            <div class="table-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Applicant</th>
                                            <th>Email</th>
                                            <th>Phone</th>
                                            <th>Experience</th>
                                            <th>Skills</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="completedFilesTable">
                                        <!-- Completed files will be loaded here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Errors Tab -->
                    <div id="errorsTab" class="resume-tab-content">
                        <div class="table-card">
                            <div class="table-header">
                                <h3>Files with Errors</h3>
                                <button class="btn btn-outline" onclick="retryFailedFiles()">
                                    <i class="fas fa-redo"></i> Retry All
                                </button>
                            </div>
                            <div class="table-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>File Name</th>
                                            <th>Error</th>
                                            <th>Attempts</th>
                                            <th>Last Attempt</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="errorFilesTable">
                                        <!-- Error files will be loaded here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- AI Results Panel -->
                    <div class="ai-results" id="aiResultsPanel" style="display: none;">
                        <div class="preview-header">
                            <h3>AI Parsing Results</h3>
                            <button class="btn btn-success" onclick="saveParsedResult()">
                                <i class="fas fa-save"></i> Save to Database
                            </button>
                        </div>
                        
                        <div class="grid-2" style="margin-bottom: 20px;">
                            <div class="parsed-field">
                                <div class="field-label">Full Name</div>
                                <div class="field-value" id="parsedName">John Doe</div>
                            </div>
                            <div class="parsed-field">
                                <div class="field-label">Email</div>
                                <div class="field-value" id="parsedEmail">john.doe@example.com</div>
                            </div>
                            <div class="parsed-field">
                                <div class="field-label">Phone</div>
                                <div class="field-value" id="parsedPhone">+1 (555) 123-4567</div>
                            </div>
                            <div class="parsed-field">
                                <div class="field-label">Experience</div>
                                <div class="field-value" id="parsedExperience">5 years</div>
                            </div>
                        </div>

                        <div class="parsed-field">
                            <div class="field-label">Skills</div>
                            <div class="field-value" id="parsedSkills">
                                <span class="badge badge-info">JavaScript</span>
                                <span class="badge badge-info">React</span>
                                <span class="badge badge-info">Node.js</span>
                                <span class="badge badge-info">Python</span>
                            </div>
                        </div>

                        <div class="parsed-field">
                            <div class="field-label">Education</div>
                            <div class="field-value" id="parsedEducation">Bachelor's in Computer Science</div>
                        </div>

                        <div class="parsed-field">
                            <div class="field-label">Work History</div>
                            <div class="field-value" id="parsedWorkHistory">
                                Senior Developer at Tech Corp (2020-Present)<br>
                                Developer at Startup Inc (2018-2020)
                            </div>
                        </div>

                        <!-- Duplicate Detection -->
                        <div class="duplicate-warning" id="duplicateWarning" style="display: none;">
                            <i class="fas fa-exclamation-triangle"></i>
                            <div>
                                <strong>Possible Duplicate Detected</strong>
                                <div style="font-size: 14px; margin-top: 5px;" id="duplicateDetails">
                                    Similar record found in database
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

              <!-- Job Postings Page -->
<div id="jobsPageContent" class="page">
    <div class="jobs-header">
        <div>
            <h2 style="margin-bottom: 5px;">Job Postings</h2>
            <p>Manage and track all job openings</p>
        </div>
        <div style="display: flex; gap: 15px; align-items: center;">
            <button class="btn-primary" onclick="showAddJobModal()">
                <i class="fas fa-plus"></i> Add New Job
            </button>
        </div>
    </div>

    <!-- Job Form (Hidden by default) -->
    <div class="candidate-form-container" id="jobFormContainer" style="display: none;">
        <h3 style="margin-bottom: 20px;" id="jobFormTitle">Add New Job</h3>
        <form id="jobForm" onsubmit="return submitJobForm()">
            <div class="form-grid">
                <div class="modal-form-group">
                    <label class="modal-form-label">Job Title *</label>
                    <input type="text" class="modal-form-input" id="jobFormTitleInput" placeholder="e.g., Senior Frontend Developer" required>
                </div>
                <div class="modal-form-group">
                    <label class="modal-form-label">Job Code *</label>
                    <input type="text" class="modal-form-input" id="jobFormCode" placeholder="e.g., JPC-001" required>
                </div>
            </div>
            
            <div class="form-grid">
                <div class="modal-form-group">
                    <label class="modal-form-label">Department *</label>
                    <select class="modal-form-select" id="jobFormDepartment" required>
                        <option value="">Select Department</option>
                        <option value="engineering">Engineering</option>
                        <option value="design">Design</option>
                        <option value="marketing">Marketing</option>
                        <option value="sales">Sales</option>
                        <option value="hr">Human Resources</option>
                        <option value="operations">Operations</option>
                        <option value="finance">Finance</option>
                    </select>
                </div>
                <div class="modal-form-group">
                    <label class="modal-form-label">Location *</label>
                    <select class="modal-form-select" id="jobFormLocation" required>
                        <option value="">Select Location</option>
                        <option value="chennai">Chennai, TN</option>
                        <option value="hyderabad">Hyderabad, TG</option>
                        <option value="bangalore">Bangalore, KA</option>
                        <option value="mumbai">Mumbai, MH</option>
                        <option value="delhi">Delhi, DL</option>
                        <option value="pune">Pune, MH</option>
                        <option value="remote">Remote</option>
                        <option value="hybrid">Hybrid</option>
                    </select>
                </div>
            </div>
            
            <div class="form-grid">
                <div class="modal-form-group">
                    <label class="modal-form-label">Job Type *</label>
                    <select class="modal-form-select" id="jobFormType" required>
                        <option value="">Select Type</option>
                        <option value="full-time">Full Time</option>
                        <option value="part-time">Part Time</option>
                        <option value="contract">Contract</option>
                        <option value="internship">Internship</option>
                        <option value="freelance">Freelance</option>
                    </select>
                </div>
                <div class="modal-form-group">
                    <label class="modal-form-label">Experience Level *</label>
                    <select class="modal-form-select" id="jobFormExperience" required>
                        <option value="">Select Experience</option>
                        <option value="entry">Entry Level</option>
                        <option value="mid">Mid Level</option>
                        <option value="senior">Senior Level</option>
                        <option value="lead">Lead</option>
                        <option value="manager">Manager</option>
                        <option value="director">Director</option>
                    </select>
                </div>
            </div>
            
            <div class="form-grid">
                <div class="modal-form-group">
                    <label class="modal-form-label">Salary Range</label>
                    <input type="text" class="modal-form-input" id="jobFormSalary" placeholder="e.g., 10L - 20L PA">
                </div>
                <div class="modal-form-group">
                    <label class="modal-form-label">Vacancies *</label>
                    <input type="number" class="modal-form-input" id="jobFormVacancies" placeholder="Number of openings" min="1" required>
                </div>
            </div>
            
            <div class="modal-form-group">
                <label class="modal-form-label">Job Description *</label>
                <textarea class="modal-form-textarea" id="jobFormDescription" placeholder="Enter detailed job description..." required rows="4"></textarea>
            </div>
            
            <div class="modal-form-group">
                <label class="modal-form-label">Requirements</label>
                <textarea class="modal-form-textarea" id="jobFormRequirements" placeholder="Enter job requirements..." rows="3"></textarea>
            </div>
            
            <div class="modal-form-group">
                <label class="modal-form-label">Responsibilities</label>
                <textarea class="modal-form-textarea" id="jobFormResponsibilities" placeholder="Enter job responsibilities..." rows="3"></textarea>
            </div>
            
            <div class="form-grid">
                <div class="modal-form-group">
                    <label class="modal-form-label">Application Deadline</label>
                    <input type="date" class="modal-form-input" id="jobFormDeadline">
                </div>
                <div class="modal-form-group">
                    <label class="modal-form-label">Status *</label>
                    <select class="modal-form-select" id="jobFormStatus" required>
                        <option value="active">Active</option>
                        <option value="draft">Draft</option>
                        <option value="closed">Closed</option>
                    </select>
                </div>
            </div>
            
            <div style="display: flex; justify-content: flex-end; gap: 15px; margin-top: 30px;">
                <button type="button" class="btn-secondary" onclick="closeJobForm()">Cancel</button>
                <button type="submit" class="btn-primary" id="jobFormSubmitBtn">Create Job</button>
            </div>
            
            <input type="hidden" id="jobFormId">
        </form>
    </div>

    <!-- Jobs List -->
    <div id="jobsList">
        <div class="table-card">
            <div class="table-header">
                <h3>All Job Postings</h3>
                <div style="display: flex; gap: 10px; align-items: center;">
                    <select class="filter-select" id="filterJobStatus" onchange="filterJobs()" style="width: 150px;">
                        <option value="">All Status</option>
                        <option value="active">Active</option>
                        <option value="draft">Draft</option>
                        <option value="closed">Closed</option>
                    </select>
                    <select class="filter-select" id="filterJobDepartment" onchange="filterJobs()" style="width: 180px;">
                        <option value="">All Departments</option>
                        <option value="engineering">Engineering</option>
                        <option value="design">Design</option>
                        <option value="marketing">Marketing</option>
                        <option value="sales">Sales</option>
                        <option value="hr">Human Resources</option>
                        <option value="operations">Operations</option>
                        <option value="finance">Finance</option>
                    </select>
                    <input type="text" class="filter-select" placeholder="Search jobs..." id="jobSearch" onkeyup="searchJobs()" style="width: 250px;">
                </div>
            </div>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Job Code</th>
                            <th>Title</th>
                            <th>Department</th>
                            <th>Location</th>
                            <th>Type</th>
                            <th>Applications</th>
                            <th>Status</th>
                            <th>Posted Date</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="jobsTableList">
                        <!-- Jobs will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
                <!-- Candidates Page -->
                <div id="candidatesPageContent" class="page">
                    <div class="jobs-header">
                        <div>
                            <h2 style="margin-bottom: 5px;">Candidates</h2>
                            <p>Manage all candidate applications</p>
                        </div>
                        <div style="display: flex; gap: 10px;">
                            <button class="btn-primary" onclick="showAddCandidateModal()">
                                <i class="fas fa-user-plus"></i> Add Candidate
                            </button>

                           <!-- Remove the file input from inside the button -->
                            <input type="file" id="candidateImportFile" accept=".csv,.json,.pdf,.doc,.docx" style="display: none;">

                            <button type="button" class="btn-secondary" id="importBtn">
                                <i class="fas fa-file-import"></i> Import
                            </button>

                            <input type="file" id="fileInput" style="display:none">
                            <button class="btn-secondary" onclick="location.href='fetch.html'">
                                <i class="fas fa-file-import"></i> Fetch
                            </button>
                        </div>
                    </div>

                    <!-- Candidates Form -->
                    <div class="candidate-form-container" id="candidateFormContainer" style="display: none;">
                        <h3 style="margin-bottom: 20px;">Add New Candidate</h3>
                        <form id="candidateForm" onsubmit="return submitCandidateForm()">
                            <div class="form-grid">
                                <div class="modal-form-group">
                                    <label class="modal-form-label">First Name *</label>
                                    <input type="text" class="modal-form-input" id="candidateFirstName" placeholder="Enter first name" required>
                                </div>
                                <div class="modal-form-group">
                                    <label class="modal-form-label">Last Name *</label>
                                    <input type="text" class="modal-form-input" id="candidateLastName" placeholder="Enter last name" required>
                                </div>
                            </div>
                            
                            <div class="form-grid">
                                <div class="modal-form-group">
                                    <label class="modal-form-label">Email *</label>
                                    <input type="email" class="modal-form-input" id="candidateEmail" placeholder="Enter email address" required>
                                </div>
                                <div class="modal-form-group">
                                    <label class="modal-form-label">Phone</label>
                                    <input type="tel" class="modal-form-input" id="candidatePhone" placeholder="Enter phone number">
                                </div>
                            </div>
                            
                            <div class="form-grid">
                                <div class="modal-form-group">
                                    <label class="modal-form-label">Applying for Job *</label>
                                    <select class="modal-form-select" id="candidateJob" required>
                                        <option value="">Select Job</option>
                                    </select>
                                </div>
                                <div class="modal-form-group">
                                    <label class="modal-form-label">Experience (Years)</label>
                                    <input type="number" class="modal-form-input" id="candidateExperience" placeholder="Years of experience" min="0">
                                </div>
                            </div>
                            
                            <div class="modal-form-group">
                                <label class="modal-form-label">Resume/CV Link</label>
                                <input type="url" class="modal-form-input" id="candidateResume" placeholder="Paste resume link">
                            </div>
                            
                            <div class="modal-form-group">
                                <label class="modal-form-label">Cover Letter</label>
                                <textarea class="modal-form-textarea" id="candidateCoverLetter" placeholder="Enter cover letter..." rows="4"></textarea>
                            </div>
                            
                            <div class="modal-form-group">
                                <label class="modal-form-label">Status</label>
                                <select class="modal-form-select" id="candidateStatus">
                                    <option value="applied">Applied</option>
                                    <option value="reviewed">Reviewed</option>
                                    <option value="interviewed">Interviewed</option>
                                    <option value="hired">Hired</option>
                                    <option value="rejected">Rejected</option>
                                </select>
                            </div>
                            
                            <div style="display: flex; justify-content: flex-end; gap: 15px; margin-top: 30px;">
                                <button type="button" class="btn-secondary" onclick="closeCandidateForm()">Cancel</button>
                                <button type="submit" class="btn-primary">Add Candidate</button>
                            </div>
                        </form>
                    </div>

                    <!-- Candidates List -->
                    <div id="candidatesList">
                        <div class="table-card">
                            <div class="table-header">
                                <h3>All Candidates</h3>
                                <div style="display: flex; gap: 10px; align-items: center;">
                                    <select class="filter-select" id="filterCandidateStatus" onchange="filterCandidates()" style="width: 150px;">
                                        <option value="">All Status</option>
                                        <option value="applied">Applied</option>
                                        <option value="reviewed">Reviewed</option>
                                        <option value="interviewed">Interviewed</option>
                                        <option value="hired">Hired</option>
                                        <option value="rejected">Rejected</option>
                                    </select>
                                    <input type="text" class="filter-select" placeholder="Search..." id="candidateSearch" onkeyup="searchCandidates()" style="width: 200px;">
                                </div>
                            </div>
                            <div class="table-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Name</th>
                                            <th>Email</th>
                                            <th>Job Applied</th>
                                            <th>Experience</th>
                                            <th>Status</th>
                                            <th>Applied Date</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="candidatesTable">
                                        <!-- Candidates will be loaded here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Import Jobs Modal -->
<div class="video-call-modal" id="importJobsModal">
    <div class="video-call-container" style="max-width: 600px;">
        <div style="padding: 20px; background: var(--primary); color: white; display: flex; justify-content: space-between; align-items: center;">
            <h3>Import Job Postings</h3>
            <button onclick="closeImportJobsModal()" style="background: none; border: none; color: white; font-size: 24px; cursor: pointer;"></button>
        </div>
        <div style="padding: 30px; flex: 1; overflow-y: auto;">
            <div style="text-align: center; margin-bottom: 20px;">
                <i class="fas fa-file-import" style="font-size: 48px; color: var(--primary); margin-bottom: 15px;"></i>
                <h3>Import Job Postings</h3>
                <p style="color: var(--gray);">Upload CSV or Excel file with job details</p>
            </div>
            
            <div class="bulk-upload-zone" onclick="document.getElementById('importJobFile').click()" style="margin-bottom: 20px;">
                <i class="fas fa-cloud-upload-alt" style="font-size: 36px;"></i>
                <h4>Drag & Drop or Click to Upload</h4>
                <p>Supported formats: CSV, XLSX, JSON</p>
                <input type="file" id="importJobFile" accept=".csv,.xlsx,.json" style="display: none;" onchange="handleJobFileImport(event)">
            </div>
            
            <div class="parsed-field" style="margin-bottom: 20px;">
                <div class="field-label">File Format</div>
                <div class="field-value">Download template: 
                    <a href="#" onclick="downloadJobTemplate()" style="color: var(--primary); text-decoration: underline;">CSV Template</a> | 
                    <a href="#" onclick="downloadJSONTemplate()" style="color: var(--primary); text-decoration: underline;">JSON Template</a>
                </div>
            </div>
            
            <div id="jobImportPreview" style="display: none;">
                <h4 style="margin-bottom: 10px;">Import Preview (5 records shown)</h4>
                <div class="table-container" style="max-height: 200px; overflow-y: auto;">
                    <table style="font-size: 12px;">
                        <thead>
                            <tr>
                                <th>Job Code</th>
                                <th>Title</th>
                                <th>Department</th>
                                <th>Location</th>
                            </tr>
                        </thead>
                        <tbody id="jobImportPreviewTable">
                            <!-- Preview rows will appear here -->
                        </tbody>
                    </table>
                </div>
                <div style="margin-top: 15px; color: var(--gray); font-size: 14px;">
                    <span id="jobImportCount">0</span> jobs ready to import
                </div>
            </div>
            
            <div style="margin-top: 30px; display: flex; gap: 10px;">
                <button class="btn btn-primary" onclick="processJobImport()" id="processJobImportBtn" style="flex: 1; display: none;">
                    <i class="fas fa-database"></i> Import Jobs
                </button>
                <button class="btn btn-secondary" onclick="closeImportJobsModal()" style="flex: 1;">
                    Cancel
                </button>
            </div>
            
            <div id="jobImportProgress" style="margin-top: 20px; display: none;">
                <div class="progress-container">
                    <div class="progress-header">
                        <span>Importing Jobs...</span>
                        <span id="jobImportProgressPercent">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="jobImportProgressFill"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Bulk Candidate Import Modal -->
<div class="video-call-modal" id="bulkCandidateImportModal">
    <div class="video-call-container" style="max-width: 700px;">
        <div style="padding: 20px; background: var(--primary); color: white; display: flex; justify-content: space-between; align-items: center;">
            <h3>Bulk Import Candidates</h3>
            <button onclick="closeBulkCandidateImportModal()" style="background: none; border: none; color: white; font-size: 24px; cursor: pointer;"></button>
        </div>
        <div style="padding: 30px; flex: 1; overflow-y: auto;">
            <div class="resume-tabs" style="margin-bottom: 20px;">
                <button class="resume-tab active" data-tab="fileImport">File Import</button>
                <button class="resume-tab" data-tab="resumeFolder">Import Resumes Folder</button>
                <button class="resume-tab" data-tab="linkedIn">LinkedIn Profiles</button>
            </div>
            
            <!-- File Import Tab -->
            <div id="fileImportTab" class="resume-tab-content active">
                <div style="text-align: center; margin-bottom: 20px;">
                    <i class="fas fa-file-csv" style="font-size: 48px; color: var(--primary); margin-bottom: 15px;"></i>
                    <h4>Import Candidates from File</h4>
                    <p style="color: var(--gray);">Upload CSV, Excel, or JSON file with candidate details</p>
                </div>
                
                <div class="bulk-upload-zone" onclick="document.getElementById('candidateFileInput').click()" style="margin-bottom: 20px;">
                    <i class="fas fa-file-upload"></i>
                    <h4>Click to Upload Candidate File</h4>
                    <p>Supported formats: CSV, XLSX, JSON</p>
                    <p style="font-size: 12px;">Required fields: Name, Email, Phone, Position</p>
                    <input type="file" id="candidateFileInput" accept=".csv,.xlsx,.json,.pdf,.doc,.docx" style="display: none;" onchange="handleCandidateFileImport(event)">
                </div>
                
                <div style="margin-top: 20px;">
                    <h4>OR Import from Resume Files</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 15px;">
                        <div class="upload-method" onclick="uploadResumeFiles()">
                            <i class="fas fa-folder-open"></i>
                            <h5>Upload Resumes</h5>
                            <p>PDF, DOC, DOCX files</p>
                        </div>
                        <div class="upload-method" onclick="scanFolderForResumes()">
                            <i class="fas fa-folder"></i>
                            <h5>Scan Folder</h5>
                            <p>Select folder with resumes</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Resume Folder Tab -->
            <div id="resumeFolderTab" class="resume-tab-content">
                <div style="text-align: center; margin-bottom: 20px;">
                    <i class="fas fa-folder" style="font-size: 48px; color: var(--primary); margin-bottom: 15px;"></i>
                    <h4>Import from Resumes Folder</h4>
                    <p style="color: var(--gray);">Select a folder containing resume files</p>
                </div>
                
                <div class="bulk-upload-zone" onclick="selectResumeFolder()" style="margin-bottom: 20px;">
                    <i class="fas fa-folder-open"></i>
                    <h4>Select Folder with Resumes</h4>
                    <p>Will scan for PDF, DOC, DOCX files</p>
                    <p style="font-size: 12px;">AI will parse resume content automatically</p>
                </div>
                
                <div id="resumeFolderPreview" style="display: none;">
                    <h4>Files Found</h4>
                    <div class="table-container" style="max-height: 200px; overflow-y: auto;">
                        <table style="font-size: 12px;">
                            <thead>
                                <tr>
                                    <th>File Name</th>
                                    <th>Size</th>
                                    <th>Type</th>
                                </tr>
                            </thead>
                            <tbody id="resumeFolderList">
                                <!-- Resume files will appear here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <!-- LinkedIn Tab -->
            <div id="linkedInTab" class="resume-tab-content">
                <div style="text-align: center; margin-bottom: 20px;">
                    <i class="fab fa-linkedin" style="font-size: 48px; color: #0077B5; margin-bottom: 15px;"></i>
                    <h4>Import from LinkedIn</h4>
                    <p style="color: var(--gray);">Import candidate profiles from LinkedIn</p>
                </div>
                
                <div class="parsed-field">
                    <div class="field-label">LinkedIn Options</div>
                    <div class="field-value">
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px;">
                                <input type="radio" name="linkedinSource" value="csv" checked> Import from LinkedIn CSV Export
                            </label>
                            <label style="display: block; margin-bottom: 5px;">
                                <input type="radio" name="linkedinSource" value="api"> Connect LinkedIn API
                            </label>
                            <label style="display: block;">
                                <input type="radio" name="linkedinSource" value="profiles"> Enter Profile URLs
                            </label>
                        </div>
                    </div>
                </div>
                
                <div id="linkedinCSVSection" style="margin-top: 20px;">
                    <div class="bulk-upload-zone" onclick="document.getElementById('linkedinFileInput').click()">
                        <i class="fas fa-file-csv"></i>
                        <h4>Upload LinkedIn CSV Export</h4>
                        <p>Export your LinkedIn connections as CSV</p>
                        <input type="file" id="linkedinFileInput" accept=".csv" style="display: none;" onchange="handleLinkedInCSV(event)">
                    </div>
                </div>
            </div>
            
            <!-- Import Preview -->
            <div id="candidateImportPreview" style="display: none; margin-top: 30px;">
                <h4>Import Preview</h4>
                <div class="table-container" style="max-height: 250px; overflow-y: auto;">
                    <table>
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Phone</th>
                                <th>Position</th>
                                <th>Source</th>
                            </tr>
                        </thead>
                        <tbody id="candidateImportPreviewTable">
                            <!-- Preview rows will appear here -->
                        </tbody>
                    </table>
                </div>
                <div style="margin-top: 15px; display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <span id="candidateImportCount">0</span> candidates ready to import
                    </div>
                    <button class="btn btn-primary" onclick="processCandidateImport()" id="processCandidateBtn">
                        <i class="fas fa-database"></i> Import Candidates
                    </button>
                </div>
            </div>
            
            <!-- Progress Section -->
            <div id="candidateImportProgress" style="display: none; margin-top: 20px;">
                <div class="progress-container">
                    <div class="progress-header">
                        <span>Processing...</span>
                        <span id="candidateImportProgressPercent">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="candidateImportProgressFill"></div>
                    </div>
                    <div style="text-align: center; margin-top: 10px; font-size: 14px;">
                        <span id="candidateImportStatus">Initializing...</span>
                    </div>
                </div>
            </div>
            
            <div style="margin-top: 30px; text-align: center;">
                <button class="btn btn-secondary" onclick="closeBulkCandidateImportModal()">
                    Close
                </button>
            </div>
        </div>
    </div>
</div>

                <!-- Interviews Page -->
                <div id="interviewsPageContent" class="page">
                    <div class="jobs-header">
                        <div>
                            <h2 style="margin-bottom: 5px;">Interviews</h2>
                            <p>Schedule and manage interviews</p>
                        </div>
                        <button class="btn-primary" onclick="showScheduleInterviewModal()">
                            <i class="fas fa-calendar-plus"></i> Schedule Interview
                        </button>
                    </div>

                    <!-- Interviews Calendar View -->
                    <div class="table-card">
                        <div class="table-header">
                            <h3>Scheduled Interviews</h3>
                            <div style="display: flex; gap: 10px;">
                                <select class="filter-select" id="filterInterviewStatus" onchange="filterInterviews()" style="width: 150px;">
                                    <option value="">All Status</option>
                                    <option value="scheduled">Scheduled</option>
                                    <option value="completed">Completed</option>
                                    <option value="cancelled">Cancelled</option>
                                </select>
                                <input type="date" class="filter-select" id="filterInterviewDate" onchange="filterInterviews()" style="width: 150px;">
                            </div>
                        </div>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Candidate</th>
                                        <th>Job Position</th>
                                        <th>Date & Time</th>
                                        <th>Interviewer</th>
                                        <th>Type</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="interviewsListTable">
                                    <!-- Interviews will be loaded here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Reports Page -->
                <div id="reportsPageContent" class="page">
                    <div class="jobs-header">
                        <div>
                            <h2 style="margin-bottom: 5px;">Reports & Analytics</h2>
                            <p>View recruitment metrics and insights</p>
                        </div>
                        <div style="display: flex; gap: 15px;">
                            <select class="filter-select" id="reportPeriod" onchange="generateReport()" style="width: 150px;">
                                <option value="weekly">This Week</option>
                                <option value="monthly" selected>This Month</option>
                                <option value="quarterly">This Quarter</option>
                                <option value="yearly">This Year</option>
                            </select>
                            <button class="btn-primary" onclick="exportReport()">
                                <i class="fas fa-download"></i> Export Report
                            </button>
                        </div>
                    </div>

                    <!-- Reports Grid -->
                    <div class="reports-grid">
                        <div class="report-card" onclick="showDetailedReport('hiring')">
                            <div class="report-icon">
                                <i class="fas fa-user-check"></i>
                            </div>
                            <h3>Hiring Metrics</h3>
                            <p>Time to hire, offer acceptance rate, and quality of hire</p>
                            <div class="stat-value" id="hiringMetrics">--</div>
                        </div>
                        
                        <div class="report-card" onclick="showDetailedReport('sources')">
                            <div class="report-icon">
                                <i class="fas fa-chart-pie"></i>
                            </div>
                            <h3>Source Analytics</h3>
                            <p>Candidate sources and their conversion rates</p>
                            <div class="stat-value" id="sourceMetrics">--</div>
                        </div>
                        
                        <div class="report-card" onclick="showDetailedReport('diversity')">
                            <div class="report-icon">
                                <i class="fas fa-globe"></i>
                            </div>
                            <h3>Diversity Report</h3>
                            <p>Demographic breakdown of candidates and hires</p>
                            <div class="stat-value" id="diversityMetrics">--</div>
                        </div>
                        
                        <div class="report-card" onclick="showDetailedReport('cost')">
                            <div class="report-icon">
                                <i class="fas fa-money-bill-wave"></i>
                            </div>
                            <h3>Cost Analysis</h3>
                            <p>Cost per hire and recruitment budget utilization</p>
                            <div class="stat-value" id="costMetrics">--</div>
                        </div>
                    </div>

                    <!-- Charts Container -->
                    <div class="chart-container" id="mainChart">
                        <h3 style="margin-bottom: 20px;">Recruitment Overview</h3>
                        <div style="height: 300px; display: flex; align-items: center; justify-content: center; color: var(--gray);">
                            <i class="fas fa-chart-bar" style="font-size: 48px; margin-right: 20px;"></i>
                            <div>
                                <h4>Chart will appear here</h4>
                                <p>Select a report to view detailed analytics</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Settings Page -->
                <div id="settingsPageContent" class="page">
                    <button class="mobile-settings-toggle" onclick="toggleSettingsSidebar()">
                        <i class="fas fa-bars"></i> Settings Menu
                    </button>
                    
                    <div class="settings-container">
                        <div class="settings-sidebar" id="settingsSidebar">
                            <button class="close-sidebar-btn" onclick="toggleSettingsSidebar()"></button>
                            <ul class="settings-nav">
                                <li class="settings-nav-item active" data-settings="profile">
                                    <i class="fas fa-user"></i> Profile Settings
                                </li>
                                <li class="settings-nav-item" data-settings="account">
                                    <i class="fas fa-shield-alt"></i> Account Security
                                </li>
                                <li class="settings-nav-item" data-settings="notifications">
                                    <i class="fas fa-bell"></i> Notifications
                                </li>
                                <li class="settings-nav-item" data-settings="privacy">
                                    <i class="fas fa-lock"></i> Privacy
                                </li>
                                <li class="settings-nav-item" data-settings="video">
                                    <i class="fas fa-video"></i> Video Settings
                                </li>
                                <li class="settings-nav-item" data-settings="resume">
                                    <i class="fas fa-file-upload"></i> Resume Settings
                                </li>
                                <li class="settings-nav-item" data-settings="api">
                                    <i class="fas fa-code"></i> API Settings
                                </li>
                                <li class="settings-nav-item" data-settings="system">
                                    <i class="fas fa-cog"></i> System Settings
                                </li>
                                <li class="settings-nav-item" data-settings="integrations">
                                    <i class="fas fa-plug"></i> Integrations
                                </li>
                            </ul>
                        </div>
                        
                        <div class="settings-content">
                            <!-- Profile Settings -->
                            <div class="settings-section active" id="profileSettings">
                                <h2>Profile Settings</h2>
                                <div class="settings-group">
                                    <h3>Personal Information</h3>
                                    <div class="settings-item">
                                        <div class="setting-label">Full Name</div>
                                        <div class="setting-control">
                                            <input type="text" class="form-input" id="profileName" style="width: 200px;">
                                            <button class="btn btn-outline" onclick="updateProfileName()">Update</button>
                                        </div>
                                    </div>
                                    <div class="settings-item">
                                        <div class="setting-label">Email Address</div>
                                        <div class="setting-control">
                                            <input type="email" class="form-input" id="profileEmail" style="width: 200px;">
                                            <button class="btn btn-outline" onclick="updateProfileEmail()">Update</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Resume Settings -->
                            <div class="settings-section" id="resumeSettings">
                                <h2>Resume Processing Settings</h2>
                                <div class="settings-group">
                                    <h3>File Upload</h3>
                                    <div class="settings-item">
                                        <div class="setting-label">Max File Size</div>
                                        <div class="setting-control">
                                            <select class="form-input" id="maxFileSize" style="width: 200px;">
                                                <option value="5">5 MB</option>
                                                <option value="10" selected>10 MB</option>
                                                <option value="25">25 MB</option>
                                                <option value="50">50 MB</option>
                                            </select>
                                            <button class="btn btn-outline" onclick="updateMaxFileSize()">Update</button>
                                        </div>
                                    </div>
                                    <div class="settings-item">
                                        <div class="setting-label">Allowed Formats</div>
                                        <div class="setting-control">
                                            <div style="display: flex; flex-direction: column; gap: 5px;">
                                                <label><input type="checkbox" checked> PDF (.pdf)</label>
                                                <label><input type="checkbox" checked> Word (.doc, .docx)</label>
                                                <label><input type="checkbox" checked> Text (.txt)</label>
                                                <label><input type="checkbox"> RTF (.rtf)</label>
                                            </div>
                                            <button class="btn btn-outline" onclick="updateAllowedFormats()">Update</button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="settings-group">
                                    <h3>AI Parsing</h3>
                                    <div class="settings-item">
                                        <div class="setting-label">Enable AI Parsing</div>
                                        <div class="setting-control">
                                            <label class="switch">
                                                <input type="checkbox" id="aiParsingToggle" checked>
                                                <span class="slider"></span>
                                            </label>
                                            <span id="aiParsingStatus">Enabled</span>
                                        </div>
                                    </div>
                                    <div class="settings-item">
                                        <div class="setting-label">Duplicate Detection</div>
                                        <div class="setting-control">
                                            <label class="switch">
                                                <input type="checkbox" id="duplicateDetection" checked>
                                                <span class="slider"></span>
                                            </label>
                                            <span id="duplicateDetectionStatus">Enabled</span>
                                        </div>
                                    </div>
                                    <div class="settings-item">
                                        <div class="setting-label">Auto-import to Database</div>
                                        <div class="setting-control">
                                            <label class="switch">
                                                <input type="checkbox" id="autoImportToggle">
                                                <span class="slider"></span>
                                            </label>
                                            <span id="autoImportStatus">Disabled</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="settings-group">
                                    <h3>Bulk Processing</h3>
                                    <div class="settings-item">
                                        <div class="setting-label">Max Files per Upload</div>
                                        <div class="setting-control">
                                            <input type="number" class="form-input" id="maxFilesPerUpload" value="1000" min="100" max="5000" style="width: 150px;">
                                            <button class="btn btn-outline" onclick="updateMaxFiles()">Update</button>
                                        </div>
                                    </div>
                                    <div class="settings-item">
                                        <div class="setting-label">Parallel Processing</div>
                                        <div class="setting-control">
                                            <select class="form-input" id="parallelProcessing" style="width: 150px;">
                                                <option value="1">1 file</option>
                                                <option value="5" selected>5 files</option>
                                                <option value="10">10 files</option>
                                                <option value="20">20 files</option>
                                            </select>
                                            <button class="btn btn-outline" onclick="updateParallelProcessing()">Update</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Other settings sections would be here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ===== MODALS ===== -->
    <!-- Add/Edit Job Modal -->
    <div class="video-call-modal" id="addJobModal">
        <div class="video-call-container" style="max-width: 800px;">
            <div style="padding: 20px; background: var(--primary); color: white; display: flex; justify-content: space-between; align-items: center;">
                <h3 id="jobModalTitle">Add New Job</h3>
                <button onclick="closeAddJobModal()" style="background: none; border: none; color: white; font-size: 24px; cursor: pointer;"></button>
            </div>
            <div style="padding: 30px; flex: 1; overflow-y: auto;">
                <form id="jobForm" onsubmit="return submitJobForm()">
                    <div class="form-grid">
                        <div class="modal-form-group">
                            <label class="modal-form-label">Job Title *</label>
                            <input type="text" class="modal-form-input" id="jobTitle" placeholder="e.g., Senior Frontend Developer" required>
                        </div>
                        <div class="modal-form-group">
                            <label class="modal-form-label">Job Code *</label>
                            <input type="text" class="modal-form-input" id="jobCode" placeholder="e.g., JPC-001" required>
                        </div>
                    </div>
                    
                    <div class="form-grid">
                        <div class="modal-form-group">
                            <label class="modal-form-label">Department *</label>
                            <select class="modal-form-select" id="jobDepartment" required>
                                <option value="">Select Department</option>
                                <option value="engineering">Engineering</option>
                                <option value="design">Design</option>
                                <option value="marketing">Marketing</option>
                                <option value="sales">Sales</option>
                                <option value="hr">Human Resources</option>
                                <option value="operations">Operations</option>
                                <option value="finance">Finance</option>
                            </select>
                        </div>
                        <div class="modal-form-group">
                            <label class="modal-form-label">Location *</label>
                            <select class="modal-form-select" id="jobLocation" required>
                                <option value="">Select Location</option>
                                <option value="chennai">Chennai, TN</option>
                                <option value="hyderabad">Hyderabad, TG</option>
                                <option value="bangalore">Bangalore, KA</option>
                                <option value="mumbai">Mumbai, MH</option>
                                <option value="delhi">Delhi, DL</option>
                                <option value="pune">Pune, MH</option>
                                <option value="kolkata">Kolkata, WB</option>
                                <option value="remote">Remote</option>
                                <option value="hybrid">Hybrid</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-grid">
                        <div class="modal-form-group">
                            <label class="modal-form-label">Job Type *</label>
                            <select class="modal-form-select" id="jobType" required>
                                <option value="">Select Type</option>
                                <option value="full-time">Full Time</option>
                                <option value="part-time">Part Time</option>
                                <option value="contract">Contract</option>
                                <option value="internship">Internship</option>
                                <option value="freelance">Freelance</option>
                            </select>
                        </div>
                        <div class="modal-form-group">
                            <label class="modal-form-label">Experience Level *</label>
                            <select class="modal-form-select" id="jobExperience" required>
                                <option value="">Select Experience</option>
                                <option value="entry">Entry Level</option>
                                <option value="mid">Mid Level</option>
                                <option value="senior">Senior Level</option>
                                <option value="lead">Lead</option>
                                <option value="manager">Manager</option>
                                <option value="director">Director</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-grid">
                        <div class="modal-form-group">
                            <label class="modal-form-label">Salary Range</label>
                            <input type="text" class="modal-form-input" id="jobSalary" placeholder="e.g., 10L - 20L PA">
                        </div>
                        <div class="modal-form-group">
                            <label class="modal-form-label">Vacancies *</label>
                            <input type="number" class="modal-form-input" id="jobVacancies" placeholder="Number of openings" min="1" required>
                        </div>
                    </div>
                    
                    <div class="modal-form-group">
                        <label class="modal-form-label">Job Description *</label>
                        <textarea class="modal-form-textarea" id="jobDescription" placeholder="Enter detailed job description..." required></textarea>
                    </div>
                    
                    <div class="modal-form-group">
                        <label class="modal-form-label">Requirements</label>
                        <textarea class="modal-form-textarea" id="jobRequirements" placeholder="Enter job requirements..."></textarea>
                    </div>
                    
                    <div class="modal-form-group">
                        <label class="modal-form-label">Responsibilities</label>
                        <textarea class="modal-form-textarea" id="jobResponsibilities" placeholder="Enter job responsibilities..."></textarea>
                    </div>
                    
                    <div class="form-grid">
                        <div class="modal-form-group">
                            <label class="modal-form-label">Application Deadline</label>
                            <input type="date" class="modal-form-input" id="jobDeadline">
                        </div>
                        <div class="modal-form-group">
                            <label class="modal-form-label">Status *</label>
                            <select class="modal-form-select" id="jobStatus" required>
                                <option value="active">Active</option>
                                <option value="draft">Draft</option>
                                <option value="closed">Closed</option>
                            </select>
                        </div>
                    </div>
                    
                    <div style="display: flex; justify-content: flex-end; gap: 15px; margin-top: 30px;">
                        <button type="button" class="btn-secondary" onclick="closeAddJobModal()">Cancel</button>
                        <button type="submit" class="btn-primary" id="jobSubmitBtn">Create Job</button>
                    </div>
                    
                    <input type="hidden" id="jobId">
                </form>
            </div>
        </div>
    </div>

    <!-- Add Candidate Modal -->
    <div class="video-call-modal" id="addCandidateModal">
        <div class="video-call-container" style="max-width: 800px;">
            <div style="padding: 20px; background: var(--primary); color: white; display: flex; justify-content: space-between; align-items: center;">
                <h3>Add New Candidate</h3>
                <button onclick="closeAddCandidateModal()" style="background: none; border: none; color: white; font-size: 24px; cursor: pointer;"></button>
            </div>
            <div style="padding: 30px; flex: 1; overflow-y: auto;">
                <form id="candidateModalForm" onsubmit="return submitCandidateModalForm()">
                    <div class="form-grid">
                        <div class="modal-form-group">
                            <label class="modal-form-label">First Name *</label>
                            <input type="text" class="modal-form-input" id="candidateModalFirstName" placeholder="Enter first name" required>
                        </div>
                        <div class="modal-form-group">
                            <label class="modal-form-label">Last Name *</label>
                            <input type="text" class="modal-form-input" id="candidateModalLastName" placeholder="Enter last name" required>
                        </div>
                    </div>
                    
                    <div class="form-grid">
                        <div class="modal-form-group">
                            <label class="modal-form-label">Email *</label>
                            <input type="email" class="modal-form-input" id="candidateModalEmail" placeholder="Enter email address" required>
                        </div>
                        <div class="modal-form-group">
                            <label class="modal-form-label">Phone</label>
                            <input type="tel" class="modal-form-input" id="candidateModalPhone" placeholder="Enter phone number">
                        </div>
                    </div>
                    
                    <div class="form-grid">
                        <div class="modal-form-group">
                            <label class="modal-form-label">Applying for Job *</label>
                            <select class="modal-form-select" id="candidateModalJob" required>
                                <option value="">Select Job</option>
                            </select>
                        </div>
                        <div class="modal-form-group">
                            <label class="modal-form-label">Experience (Years)</label>
                            <input type="number" class="modal-form-input" id="candidateModalExperience" placeholder="Years of experience" min="0">
                        </div>
                    </div>
                    
                    <div class="modal-form-group">
                        <label class="modal-form-label">Current Company</label>
                        <input type="text" class="modal-form-input" id="candidateModalCompany" placeholder="Current company">
                    </div>
                    
                    <div class="modal-form-group">
                        <label class="modal-form-label">Current Position</label>
                        <input type="text" class="modal-form-input" id="candidateModalPosition" placeholder="Current position">
                    </div>
                    
                    <div class="modal-form-group">
                        <label class="modal-form-label">Skills (comma separated)</label>
                        <input type="text" class="modal-form-input" id="candidateModalSkills" placeholder="e.g., JavaScript, React, Node.js">
                    </div>
                    
                    <div class="modal-form-group">
                        <label class="modal-form-label">Resume/CV Link</label>
                        <input type="url" class="modal-form-input" id="candidateModalResume" placeholder="Paste resume link">
                    </div>
                    
                    <div class="modal-form-group">
                        <label class="modal-form-label">Cover Letter</label>
                        <textarea class="modal-form-textarea" id="candidateModalCoverLetter" placeholder="Enter cover letter..." rows="4"></textarea>
                    </div>
                    
                    <div class="form-grid">
                        <div class="modal-form-group">
                            <label class="modal-form-label">Status</label>
                            <select class="modal-form-select" id="candidateModalStatus">
                                <option value="applied">Applied</option>
                                <option value="reviewed">Reviewed</option>
                                <option value="interviewed">Interviewed</option>
                                <option value="hired">Hired</option>
                                <option value="rejected">Rejected</option>
                            </select>
                        </div>
                        <div class="modal-form-group">
                            <label class="modal-form-label">Source</label>
                            <select class="modal-form-select" id="candidateModalSource">
                                <option value="linkedin">LinkedIn</option>
                                <option value="indeed">Indeed</option>
                                <option value="company_website">Company Website</option>
                                <option value="referral">Referral</option>
                                <option value="upload">Resume Upload</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>
                    
                    <div style="display: flex; justify-content: flex-end; gap: 15px; margin-top: 30px;">
                        <button type="button" class="btn-secondary" onclick="closeAddCandidateModal()">Cancel</button>
                        <button type="submit" class="btn-primary">Add Candidate</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Resume Upload Modal -->
    <div class="video-call-modal" id="resumeUploadModal">
        <div class="video-call-container" style="max-width: 800px;">
            <div style="padding: 20px; background: var(--primary); color: white; display: flex; justify-content: space-between; align-items: center;">
                <h3 id="uploadModalTitle">Upload Resume</h3>
                <button onclick="closeResumeUploadModal()" style="background: none; border: none; color: white; font-size: 24px; cursor: pointer;"></button>
            </div>
            <div style="padding: 30px; flex: 1; overflow-y: auto;">
                <div id="uploadModalContent">
                    <!-- Content will be loaded dynamically -->
                </div>
            </div>
        </div>
    </div>

    <!-- AI Parsing Results Modal -->
    <div class="video-call-modal" id="aiParsingModal">
        <div class="video-call-container" style="max-width: 1000px;">
            <div style="padding: 20px; background: var(--primary); color: white; display: flex; justify-content: space-between; align-items: center;">
                <h3>AI Resume Parsing Results</h3>
                <button onclick="closeAIParsingModal()" style="background: none; border: none; color: white; font-size: 24px; cursor: pointer;"></button>
            </div>
            <div style="padding: 30px; flex: 1; overflow-y: auto;">
                <div id="aiParsingResults">
                    <!-- Results will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Schedule Interview Modal -->
    <div class="video-call-modal" id="scheduleInterviewModal">
        <div class="video-call-container" style="max-width: 800px;">
            <div style="padding: 20px; background: var(--primary); color: white; display: flex; justify-content: space-between; align-items: center;">
                <h3>Schedule Interview</h3>
                <button onclick="closeScheduleInterviewModal()" style="background: none; border: none; color: white; font-size: 24px; cursor: pointer;"></button>
            </div>
            <div style="padding: 30px; flex: 1; overflow-y: auto;">
                <form id="interviewForm" onsubmit="return submitInterviewForm()">
                    <div class="form-grid">
                        <div class="modal-form-group">
                            <label class="modal-form-label">Candidate *</label>
                            <select class="modal-form-select" id="interviewCandidate" required>
                                <option value="">Select Candidate</option>
                            </select>
                        </div>
                        <div class="modal-form-group">
                            <label class="modal-form-label">Job Position *</label>
                            <select class="modal-form-select" id="interviewJob" required>
                                <option value="">Select Job</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-grid">
                        <div class="modal-form-group">
                            <label class="modal-form-label">Date *</label>
                            <input type="date" class="modal-form-input" id="interviewDate" required>
                        </div>
                        <div class="modal-form-group">
                            <label class="modal-form-label">Time *</label>
                            <input type="time" class="modal-form-input" id="interviewTime" required>
                        </div>
                    </div>
                    
                    <div class="form-grid">
                        <div class="modal-form-group">
                            <label class="modal-form-label">Duration *</label>
                            <select class="modal-form-select" id="interviewDuration" required>
                                <option value="30">30 minutes</option>
                                <option value="45">45 minutes</option>
                                <option value="60" selected>60 minutes</option>
                                <option value="90">90 minutes</option>
                                <option value="120">120 minutes</option>
                            </select>
                        </div>
                        <div class="modal-form-group">
                            <label class="modal-form-label">Interview Type *</label>
                            <select class="modal-form-select" id="interviewType" required>
                                <option value="phone">Phone Screening</option>
                                <option value="video" selected>Video Interview</option>
                                <option value="in_person">In-person Interview</option>
                                <option value="technical">Technical Interview</option>
                                <option value="hr">HR Interview</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-grid">
                        <div class="modal-form-group">
                            <label class="modal-form-label">Interviewer(s) *</label>
                            <input type="text" class="modal-form-input" id="interviewInterviewers" placeholder="Enter interviewer names" required>
                        </div>
                        <div class="modal-form-group">
                            <label class="modal-form-label">Status</label>
                            <select class="modal-form-select" id="interviewStatus">
                                <option value="scheduled" selected>Scheduled</option>
                                <option value="confirmed">Confirmed</option>
                                <option value="completed">Completed</option>
                                <option value="cancelled">Cancelled</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="modal-form-group">
                        <label class="modal-form-label">Meeting Link/Location</label>
                        <input type="text" class="modal-form-input" id="interviewLocation" placeholder="Enter meeting link or location">
                    </div>
                    
                    <div class="modal-form-group">
                        <label class="modal-form-label">Notes/Agenda</label>
                        <textarea class="modal-form-textarea" id="interviewNotes" placeholder="Enter interview notes or agenda..." rows="4"></textarea>
                    </div>
                    
                    <div style="display: flex; justify-content: flex-end; gap: 15px; margin-top: 30px;">
                        <button type="button" class="btn-secondary" onclick="closeScheduleInterviewModal()">Cancel</button>
                        <button type="submit" class="btn-primary">Schedule Interview</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Video Call Modal -->
    <div class="video-call-modal" id="videoCallModal">
        <div class="video-call-container">
            <div style="padding: 20px; background: var(--primary); color: white; display: flex; justify-content: space-between; align-items: center;">
                <h3 id="callTitle">Video Interview</h3>
                <button onclick="endVideoCall()" style="background: none; border: none; color: white; font-size: 24px; cursor: pointer;"></button>
            </div>
            <div style="flex: 1; padding: 20px; background: #1a1a1a; position: relative;">
                <div class="video-grid" id="videoGrid">
                    <div class="video-participant" id="localVideoContainer">
                        <video id="localVideo" autoplay muted style="width: 100%; height: 100%; object-fit: cover;"></video>
                        <div style="position: absolute; bottom: 10px; left: 10px; background: rgba(0,0,0,0.7); color: white; padding: 5px 10px; border-radius: 4px; font-size: 12px;">
                            You (Me)
                        </div>
                    </div>
                    <div class="video-participant" id="remoteVideoContainer">
                        <video id="remoteVideo" autoplay style="width: 100%; height: 100%; object-fit: cover;"></video>
                        <div style="position: absolute; bottom: 10px; left: 10px; background: rgba(0,0,0,0.7); color: white; padding: 5px 10px; border-radius: 4px; font-size: 12px;">
                            <span id="remoteParticipantName">Remote Participant</span>
                        </div>
                    </div>
                </div>
                <div class="video-controls">
                    <button class="control-btn" onclick="toggleMute()" id="muteBtn">
                        <i class="fas fa-microphone"></i>
                    </button>
                    <button class="control-btn" onclick="toggleVideo()" id="videoBtn">
                        <i class="fas fa-video"></i>
                    </button>
                    <button class="control-btn" onclick="toggleScreenShare()" id="screenShareBtn">
                        <i class="fas fa-desktop"></i>
                    </button>
                    <button class="control-btn end-call" onclick="endVideoCall()">
                        <i class="fas fa-phone-slash"></i>
                    </button>
                </div>
            </div>
            <div style="padding: 20px; background: white; border-top: 1px solid var(--gray-light);">
                <h4 style="margin-bottom: 15px;">Call Information</h4>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                    <div>
                        <strong>Call ID:</strong> <span id="callId">VC-12345</span>
                    </div>
                    <div>
                        <strong>Duration:</strong> <span id="callDuration">00:00</span>
                    </div>
                    <div>
                        <strong>Participants:</strong> <span id="participantCount">2</span>
                    </div>
                    <div>
                        <strong>Status:</strong> <span id="callStatus">Connected</span>
                    </div>
                </div>
                <div style="margin-top: 15px;">
                    <button class="btn btn-outline" onclick="copyCallLink()">
                        <i class="fas fa-link"></i> Copy Call Link
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Switch User Modal -->
    <div class="switch-user-modal" id="switchUserModal">
        <div class="switch-user-content">
            <h2 style="margin-bottom: 20px;">Switch User Account</h2>
            <form id="switchUserForm" onsubmit="return handleSwitchUser()">
                <div class="form-group">
                    <label class="form-label">Select User</label>
                    <select class="form-input" id="switchUserSelect" required>
                        <option value="">Select a user...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Password</label>
                    <div class="input-with-icon">
                        <input type="password" class="form-input" id="switchUserPassword" placeholder="Enter password" required>
                        <i class="fas fa-lock"></i>
                    </div>
                    <div class="error-message" id="switchUserError"></div>
                </div>
                <div style="display: flex; justify-content: flex-end; gap: 15px; margin-top: 30px;">
                    <button type="button" class="btn-secondary" onclick="closeSwitchUserModal()">Cancel</button>
                    <button type="submit" class="btn-primary">Switch User</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Notifications Modal -->
    <div class="notifications-modal" id="notificationsModal">
        <div style="padding: 20px; border-bottom: 1px solid var(--gray-light); display: flex; justify-content: space-between; align-items: center;">
            <h3>Notifications</h3>
            <button onclick="toggleNotifications()" style="background: none; border: none; cursor: pointer;">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div style="max-height: 400px; overflow-y: auto;" id="notificationsList">
            <!-- Notifications loaded here -->
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

<script>
// ================= INITIALIZATION =================
document.addEventListener('DOMContentLoaded', function() {
    console.log('Quantum Pulse ATS Initializing...');
    
    // Initialize all data and UI
    initializeData();
    setupEventListeners();
    checkSession();
    setupImportEventListeners();
    
    console.log('Initialization complete!');
});

// ================= DATA MANAGEMENT =================
let currentUser = null;
let jobs = [];
let candidates = [];
let interviews = [];
let uploadedFiles = [];
let editingJobId = null;
let jobsToImport = null;
let candidatesToImport = null;

function initializeData() {
    // Load from localStorage or create default data
    jobs = JSON.parse(localStorage.getItem('quantumpulse_jobs')) || [
        {
            id: 'job_001',
            code: 'DEV-001',
            title: 'Senior Frontend Developer',
            department: 'engineering',
            location: 'remote',
            type: 'full-time',
            salary: '$120,000 - $150,000',
            description: 'We are looking for an experienced Frontend Developer...',
            requirements: ['5+ years React experience', 'JavaScript/TypeScript'],
            status: 'active',
            applications: 24,
            postedDate: '2024-01-15'
        }
    ];
    
    candidates = JSON.parse(localStorage.getItem('quantumpulse_candidates')) || [
        {
            id: 'candidate_001',
            name: 'John Smith',
            email: 'john.smith@example.com',
            phone: '+1 (555) 123-4567',
            position: 'Senior Frontend Developer',
            status: 'interview_scheduled',
            appliedDate: '2024-01-25',
            experience: '5 years'
        }
    ];
    
    interviews = JSON.parse(localStorage.getItem('quantumpulse_interviews')) || [
        {
            id: 'interview_001',
            candidateId: 'candidate_001',
            jobId: 'job_001',
            date: '2024-01-25',
            time: '14:30',
            type: 'video',
            status: 'scheduled',
            interviewer: 'HR Manager'
        }
    ];
    
    // Set default admin user
    currentUser = {
        id: 'admin_001',
        name: 'Admin User',
        email: 'admin@quantumpulse.com',
        role: 'Administrator',
        avatar: 'AU'
    };
}

function saveData() {
    localStorage.setItem('quantumpulse_jobs', JSON.stringify(jobs));
    localStorage.setItem('quantumpulse_candidates', JSON.stringify(candidates));
    localStorage.setItem('quantumpulse_interviews', JSON.stringify(interviews));
    if (currentUser) {
        localStorage.setItem('quantumpulse_currentUser', JSON.stringify(currentUser));
    }
}

// ================= AUTHENTICATION =================
function checkSession() {
    const savedUser = localStorage.getItem('quantumpulse_currentUser');
    if (savedUser) {
        currentUser = JSON.parse(savedUser);
        showDashboard();
    }
}

function loginUserDirect(event) {
    event.preventDefault();
    
    const email = document.getElementById('loginEmail').value;
    const password = document.getElementById('loginPassword').value;
    
    // Demo credentials
    if (email === 'admin@quantumpulse.com' && password === 'Admin@123') {
        currentUser = {
            id: 'admin_001',
            name: 'Admin User',
            email: 'admin@quantumpulse.com',
            role: 'Administrator',
            avatar: 'AU'
        };
        
        localStorage.setItem('quantumpulse_currentUser', JSON.stringify(currentUser));
        showDashboard();
        showToast('Welcome back, Admin!', 'success');
        return true;
    }
    
    showToast('Invalid email or password', 'error');
    return false;
}

function showDashboard() {
    document.getElementById('loginPage').style.display = 'none';
    document.getElementById('dashboardPage').style.display = 'block';
    updateUserInfo();
    loadDashboardData();
}

function logout() {
    localStorage.removeItem('quantumpulse_currentUser');
    document.getElementById('dashboardPage').style.display = 'none';
    document.getElementById('loginPage').style.display = 'flex';
    showToast('Logged out successfully', 'success');
}

function switchToTab(tab) {
    // Update tab buttons
    document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.dataset.tab === tab) {
            btn.classList.add('active');
        }
    });
    
    // Show/hide forms
    document.querySelectorAll('.form-content').forEach(form => {
        form.classList.remove('active');
        if (form.id === tab + 'Form') {
            form.classList.add('active');
        }
    });
}

// ================= PAGE MANAGEMENT =================
function navigateToPage(pageId) {
    // Update menu
    document.querySelectorAll('.menu-item').forEach(item => {
        item.classList.remove('active');
        if (item.dataset.page === pageId) {
            item.classList.add('active');
        }
    });
    
    // Update page title
    const pageTitles = {
        dashboard: 'Dashboard',
        jobs: 'Job Postings',
        candidates: 'Candidates',
        'resume-upload': 'Resume Upload',
        'resume-parse': 'Parse Resumes',
        interviews: 'Interviews',
        reports: 'Reports',
        settings: 'Settings'
    };
    
    const pageTitle = document.getElementById('pageTitle');
    if (pageTitle && pageTitles[pageId]) {
        pageTitle.innerHTML = `<i class="fas fa-${getPageIcon(pageId)}"></i> ${pageTitles[pageId]}`;
    }
    
    // Show/hide pages
    document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
    const targetPage = document.getElementById(pageId + 'PageContent') || document.getElementById(pageId + 'Page');
    if (targetPage) {
        targetPage.classList.add('active');
    }
    
    // Load page data
    loadPageData(pageId);
    
    // Close mobile menu
    closeMobileMenu();
}

function getPageIcon(pageId) {
    const icons = {
        dashboard: 'th-large',
        jobs: 'briefcase',
        candidates: 'users',
        'resume-upload': 'upload',
        'resume-parse': 'file-alt',
        interviews: 'calendar-alt',
        reports: 'chart-bar',
        settings: 'cog'
    };
    return icons[pageId] || 'file';
}

function loadPageData(pageId) {
    switch(pageId) {
        case 'dashboard':
            updateDashboardStats();
            refreshJobsTable();
            refreshInterviewsTable();
            break;
        case 'jobs':
            loadJobsPage();
            break;
        case 'candidates':
            loadCandidatesPage();
            break;
        case 'resume-upload':
            loadResumeUploadPage();
            break;
        case 'resume-parse':
            loadResumeParsePage();
            break;
        case 'interviews':
            loadInterviewsPage();
            break;
        case 'reports':
            loadReportsPage();
            break;
        case 'settings':
            loadSettingsPage();
            break;
    }
}

// ================= DASHBOARD FUNCTIONS =================
function updateUserInfo() {
    if (!currentUser) return;
    
    document.getElementById('userName').textContent = currentUser.name;
    document.getElementById('userRole').textContent = currentUser.role;
    document.getElementById('userAvatar').textContent = currentUser.avatar;
    document.getElementById('greetingName').textContent = currentUser.name.split(' ')[0];
    
    // Update dropdown
    const dropdownName = document.getElementById('dropdownName');
    const dropdownRole = document.getElementById('dropdownRole');
    const dropdownAvatar = document.getElementById('dropdownAvatar');
    
    if (dropdownName) dropdownName.textContent = currentUser.name;
    if (dropdownRole) dropdownRole.textContent = currentUser.role;
    if (dropdownAvatar) dropdownAvatar.textContent = currentUser.avatar;
}

function loadDashboardData() {
    updateDashboardStats();
    refreshJobsTable();
    refreshInterviewsTable();
}

function updateDashboardStats() {
    document.getElementById('activeJobs').textContent = jobs.filter(j => j.status === 'active').length;
    document.getElementById('totalCandidates').textContent = candidates.length;
    
    // Count interviews for today
    const today = new Date().toISOString().split('T')[0];
    const todayInterviews = interviews.filter(i => i.date === today).length;
    document.getElementById('interviewsToday').textContent = todayInterviews;
    
    document.getElementById('hiredThisMonth').textContent = candidates.filter(c => c.status === 'hired').length;
}

function refreshJobsTable() {
    const table = document.getElementById('jobsTable');
    if (!table) return;
    
    const recentJobs = jobs.slice(0, 5);
    
    table.innerHTML = recentJobs.map(job => `
        <tr>
            <td>${job.code}</td>
            <td>${job.title}</td>
            <td>${job.applications || 0}</td>
            <td><span class="status-badge status-${job.status}">${job.status}</span></td>
            <td>
                <button class="btn btn-outline btn-sm" onclick="viewJob('${job.id}')">View</button>
            </td>
        </tr>
    `).join('');
}

function refreshInterviewsTable() {
    const table = document.getElementById('interviewsTable');
    if (!table) return;
    
    // Get today's interviews
    const today = new Date().toISOString().split('T')[0];
    const todayInterviews = interviews.filter(i => i.date === today).slice(0, 5);
    
    table.innerHTML = todayInterviews.map(interview => {
        const candidate = candidates.find(c => c.id === interview.candidateId);
        const job = jobs.find(j => j.id === interview.jobId);
        
        return `
        <tr>
            <td>${candidate ? candidate.name : 'Unknown Candidate'}</td>
            <td>${interview.time}</td>
            <td><span class="status-badge status-${interview.status}">${interview.status}</span></td>
            <td>
                <button class="btn btn-outline btn-sm" onclick="viewInterview('${interview.id}')">View</button>
            </td>
        </tr>
        `;
    }).join('');
}

// ================= JOBS PAGE =================
function loadJobsPage() {
    refreshJobsList();
}

function refreshJobsList() {
    const table = document.getElementById('jobsTableList');
    if (!table) return;
    
    table.innerHTML = jobs.map(job => `
        <tr>
            <td>${job.code}</td>
            <td>${job.title}</td>
            <td>${job.department || 'N/A'}</td>
            <td>${job.location || 'N/A'}</td>
            <td>${job.applications || 0}</td>
            <td><span class="status-badge status-${job.status}">${job.status}</span></td>
            <td>
                <button class="btn btn-outline btn-sm" onclick="editJob('${job.id}')">Edit</button>
                <button class="btn btn-outline btn-sm" onclick="deleteJob('${job.id}')">Delete</button>
            </td>
        </tr>
    `).join('');
}

function showAddJobModal() {
    editingJobId = null;
    document.getElementById('jobModalTitle').textContent = 'Add New Job';
    document.getElementById('jobSubmitBtn').textContent = 'Create Job';
    
    // Reset form
    const form = document.getElementById('jobForm');
    if (form) form.reset();
    
    // Show modal
    document.getElementById('addJobModal').style.display = 'flex';
}

function closeAddJobModal() {
    document.getElementById('addJobModal').style.display = 'none';
}

function submitJobForm(event) {
    event.preventDefault();
    
    const jobId = editingJobId || 'job_' + Date.now();
    
    const jobData = {
        id: jobId,
        title: document.getElementById('jobTitle').value,
        code: document.getElementById('jobCode').value,
        department: document.getElementById('jobDepartment').value,
        location: document.getElementById('jobLocation').value,
        type: document.getElementById('jobType').value,
        status: document.getElementById('jobStatus').value,
        salary: document.getElementById('jobSalary').value,
        description: document.getElementById('jobDescription').value,
        requirements: document.getElementById('jobRequirements').value.split('\n'),
        responsibilities: document.getElementById('jobResponsibilities').value.split('\n'),
        vacancies: document.getElementById('jobVacancies').value,
        deadline: document.getElementById('jobDeadline').value,
        applications: 0,
        postedDate: new Date().toISOString().split('T')[0]
    };
    
    if (editingJobId) {
        // Update existing job
        const index = jobs.findIndex(j => j.id === editingJobId);
        if (index !== -1) {
            jobs[index] = jobData;
        }
    } else {
        // Add new job
        jobs.push(jobData);
    }
    
    saveData();
    closeAddJobModal();
    refreshJobsList();
    refreshJobsList();
    updateDashboardStats();
    
    showToast(editingJobId ? 'Job updated successfully' : 'Job created successfully', 'success');
    return false;
}

function editJob(jobId) {
    const job = jobs.find(j => j.id === jobId);
    if (!job) return;
    
    editingJobId = jobId;
    document.getElementById('jobModalTitle').textContent = 'Edit Job';
    document.getElementById('jobSubmitBtn').textContent = 'Update Job';
    
    // Fill form
    document.getElementById('jobTitle').value = job.title;
    document.getElementById('jobCode').value = job.code;
    document.getElementById('jobDepartment').value = job.department;
    document.getElementById('jobLocation').value = job.location;
    document.getElementById('jobType').value = job.type;
    document.getElementById('jobStatus').value = job.status;
    document.getElementById('jobSalary').value = job.salary || '';
    document.getElementById('jobDescription').value = job.description || '';
    document.getElementById('jobRequirements').value = Array.isArray(job.requirements) ? job.requirements.join('\n') : job.requirements || '';
    document.getElementById('jobResponsibilities').value = Array.isArray(job.responsibilities) ? job.responsibilities.join('\n') : job.responsibilities || '';
    document.getElementById('jobVacancies').value = job.vacancies || 1;
    document.getElementById('jobDeadline').value = job.deadline || '';
    
    document.getElementById('addJobModal').style.display = 'flex';
}

function deleteJob(jobId) {
    if (!confirm('Are you sure you want to delete this job?')) return;
    
    jobs = jobs.filter(j => j.id !== jobId);
    saveData();
    refreshJobsList();
    updateDashboardStats();
    
    showToast('Job deleted successfully', 'success');
}

function viewJob(jobId) {
    const job = jobs.find(j => j.id === jobId);
    if (!job) return;
    
    alert(`Job Details:\n\nTitle: ${job.title}\nCode: ${job.code}\nDepartment: ${job.department}\nStatus: ${job.status}\nApplications: ${job.applications}`);
}

function filterJobs() {
    const statusFilter = document.getElementById('filterJobStatus')?.value;
    const departmentFilter = document.getElementById('filterJobDepartment')?.value;
    const searchTerm = document.getElementById('jobSearch')?.value.toLowerCase();
    
    let filteredJobs = jobs;
    
    if (statusFilter) {
        filteredJobs = filteredJobs.filter(job => job.status === statusFilter);
    }
    
    if (departmentFilter) {
        filteredJobs = filteredJobs.filter(job => job.department === departmentFilter);
    }
    
    if (searchTerm) {
        filteredJobs = filteredJobs.filter(job => 
            job.title.toLowerCase().includes(searchTerm) ||
            job.code.toLowerCase().includes(searchTerm) ||
            job.description.toLowerCase().includes(searchTerm)
        );
    }
    
    const table = document.getElementById('jobsTableList');
    if (!table) return;
    
    table.innerHTML = filteredJobs.map(job => `
        <tr>
            <td>${job.code}</td>
            <td>${job.title}</td>
            <td>${job.department || 'N/A'}</td>
            <td>${job.location || 'N/A'}</td>
            <td>${job.applications || 0}</td>
            <td><span class="status-badge status-${job.status}">${job.status}</span></td>
            <td>
                <button class="btn btn-outline btn-sm" onclick="editJob('${job.id}')">Edit</button>
                <button class="btn btn-outline btn-sm" onclick="deleteJob('${job.id}')">Delete</button>
            </td>
        </tr>
    `).join('');
}

// ================= CANDIDATES PAGE =================
function loadCandidatesPage() {
    refreshCandidatesList();
    
    // Populate job dropdown in candidate form
    const jobSelect = document.getElementById('candidateJob');
    if (jobSelect) {
        jobSelect.innerHTML = '<option value="">Select Job</option>' +
            jobs.filter(j => j.status === 'active').map(j => 
                `<option value="${j.id}">${j.title} (${j.code})</option>`
            ).join('');
    }
}

function refreshCandidatesList() {
    const table = document.getElementById('candidatesTable');
    if (!table) return;
    
    table.innerHTML = candidates.map(candidate => `
        <tr>
            <td>${candidate.id.substring(0, 8)}...</td>
            <td>${candidate.name}</td>
            <td>${candidate.email}</td>
            <td>${candidate.position || 'N/A'}</td>
            <td>${candidate.experience || 'N/A'}</td>
            <td><span class="status-badge status-${candidate.status}">${candidate.status.replace('_', ' ')}</span></td>
            <td>${candidate.appliedDate}</td>
            <td>
                <button class="btn btn-outline btn-sm" onclick="viewCandidate('${candidate.id}')">View</button>
                <button class="btn btn-outline btn-sm" onclick="deleteCandidate('${candidate.id}')">Delete</button>
            </td>
        </tr>
    `).join('');
}

function addCandidateToTable(candidateData) {
    // Get the table body
    const table = document.getElementById('candidatesTable');
    
    if (!table) {
        console.error('Table with ID "candidatesTable" not found');
        return;
    }
    
    // Create new row
    const newRow = table.insertRow();
    
    // Add cells with data
    newRow.innerHTML = `
        <td>${candidateData.id.substring(0, 8)}...</td>
        <td>${candidateData.name}</td>
        <td>${candidateData.email}</td>
        <td>${candidateData.position || 'N/A'}</td>
        <td>${candidateData.experience || 'N/A'}</td>
        <td><span class="status-badge status-${candidateData.status}">${candidateData.status.replace('_', ' ')}</span></td>
        <td>${candidateData.appliedDate}</td>
        <td>
            <button class="btn btn-outline btn-sm" onclick="viewCandidate('${candidateData.id}')">View</button>
            <button class="btn btn-outline btn-sm" onclick="deleteCandidate('${candidateData.id}')">Delete</button>
        </td>
    `;
    
    // Optional: Scroll to the new row
    newRow.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
}

function showAddCandidateModal() {
    // Populate job dropdown
    const jobSelect = document.getElementById('candidateModalJob');
    if (jobSelect) {
        jobSelect.innerHTML = '<option value="">Select Job</option>' +
            jobs.filter(j => j.status === 'active').map(j => 
                `<option value="${j.id}">${j.title} (${j.code})</option>`
            ).join('');
    }
    
    document.getElementById('addCandidateModal').style.display = 'flex';
}

function submitCandidateModalForm(event) {
    event.preventDefault();
    
    const candidateData = {
        id: 'candidate_' + Date.now(),
        name: document.getElementById('candidateModalFirstName').value + ' ' + 
               document.getElementById('candidateModalLastName').value,
        email: document.getElementById('candidateModalEmail').value,
        phone: document.getElementById('candidateModalPhone').value,
        position: 'Applied Position',
        experience: document.getElementById('candidateModalExperience').value || '0',
        company: document.getElementById('candidateModalCompany').value || '',
        currentPosition: document.getElementById('candidateModalPosition').value || '',
        skills: document.getElementById('candidateModalSkills').value.split(',').map(s => s.trim()).filter(s => s),
        status: document.getElementById('candidateModalStatus').value || 'applied',
        source: document.getElementById('candidateModalSource').value || 'manual',
        appliedDate: new Date().toISOString().split('T')[0],
        resumeLink: document.getElementById('candidateModalResume').value || '',
        coverLetter: document.getElementById('candidateModalCoverLetter').value || ''
    };
    
    candidates.push(candidateData);
    saveData();
    
    refreshCandidatesDisplay();
    
    closeAddCandidateModal();
    updateDashboardStats();
    
    showToast('Candidate added successfully', 'success');
    return false;
}

function viewCandidate(candidateId) {
    const candidate = candidates.find(c => c.id === candidateId);
    if (!candidate) return;
    
    alert(`Candidate Details:\n\nName: ${candidate.name}\nEmail: ${candidate.email}\nPhone: ${candidate.phone}\nStatus: ${candidate.status}\nApplied Date: ${candidate.appliedDate}`);
}

function deleteCandidate(candidateId) {
    if (!confirm('Are you sure you want to delete this candidate?')) return;
    
    candidates = candidates.filter(c => c.id !== candidateId);
    saveData();
    refreshCandidatesList();
    updateDashboardStats();
    
    showToast('Candidate deleted successfully', 'success');
}

function filterCandidates() {
    const statusFilter = document.getElementById('filterCandidateStatus')?.value;
    const searchTerm = document.getElementById('candidateSearch')?.value.toLowerCase();
    
    let filteredCandidates = candidates;
    
    if (statusFilter) {
        filteredCandidates = filteredCandidates.filter(candidate => candidate.status === statusFilter);
    }
    
    if (searchTerm) {
        filteredCandidates = filteredCandidates.filter(candidate => 
            candidate.name.toLowerCase().includes(searchTerm) ||
            candidate.email.toLowerCase().includes(searchTerm) ||
            candidate.position.toLowerCase().includes(searchTerm)
        );
    }
    
    const table = document.getElementById('candidatesTable');
    if (!table) return;
    
    table.innerHTML = filteredCandidates.map(candidate => `
        <tr>
            <td>${candidate.id.substring(0, 8)}...</td>
            <td>${candidate.name}</td>
            <td>${candidate.email}</td>
            <td>${candidate.position || 'N/A'}</td>
            <td>${candidate.experience || 'N/A'}</td>
            <td><span class="status-badge status-${candidate.status}">${candidate.status.replace('_', ' ')}</span></td>
            <td>${candidate.appliedDate}</td>
            <td>
                <button class="btn btn-outline btn-sm" onclick="viewCandidate('${candidate.id}')">View</button>
                <button class="btn btn-outline btn-sm" onclick="deleteCandidate('${candidate.id}')">Delete</button>
            </td>
        </tr>
    `).join('');
}

function searchCandidates() {
    filterCandidates();
}

// ================= RESUME UPLOAD PAGE =================
function loadResumeUploadPage() {
    updateResumeStats();
}

function updateResumeStats() {
    const uploadedFiles = JSON.parse(localStorage.getItem('quantumpulse_uploaded_files')) || [];
    
    document.getElementById('totalUploaded').textContent = uploadedFiles.length;
    document.getElementById('pendingParsing').textContent = uploadedFiles.filter(f => f.status === 'pending').length;
    document.getElementById('parsedSuccess').textContent = uploadedFiles.filter(f => f.status === 'parsed').length;
    
    // Calculate storage used (simulated)
    const storageUsed = uploadedFiles.reduce((total, file) => total + (file.size || 0), 0);
    document.getElementById('storageUsed').textContent = Math.round(storageUsed / 1024) + ' MB';
}

function handleBulkUpload(event) {
    const files = Array.from(event.target.files);
    if (files.length === 0) return;
    
    const uploadedFiles = JSON.parse(localStorage.getItem('quantumpulse_uploaded_files')) || [];
    
    // Process each file
    files.forEach((file, index) => {
        const fileData = {
            id: 'file_' + Date.now() + '_' + index,
            name: file.name,
            size: file.size,
            type: file.type,
            uploadedAt: new Date().toISOString(),
            status: 'pending',
            parsedData: null
        };
        
        uploadedFiles.push(fileData);
    });
    
    localStorage.setItem('quantumpulse_uploaded_files', JSON.stringify(uploadedFiles));
    
    // Show progress
    const progressContainer = document.getElementById('uploadProgress');
    const progressFill = document.getElementById('progressFill');
    const progressPercentage = document.getElementById('progressPercentage');
    const uploadStatus = document.getElementById('uploadStatus');
    
    progressContainer.style.display = 'block';
    
    let progress = 0;
    const interval = setInterval(() => {
        progress += 10;
        progressFill.style.width = progress + '%';
        progressPercentage.textContent = progress + '%';
        uploadStatus.textContent = `Uploading ${files.length} files...`;
        
        if (progress >= 100) {
            clearInterval(interval);
            uploadStatus.textContent = 'Upload complete!';
            updateResumeStats();
            loadFileList();
            showToast(`${files.length} files uploaded successfully`, 'success');
        }
    }, 100);
}

function loadFileList() {
    const fileList = document.getElementById('fileList');
    const uploadedFiles = JSON.parse(localStorage.getItem('quantumpulse_uploaded_files')) || [];
    
    fileList.innerHTML = uploadedFiles.slice(0, 10).map(file => `
        <div class="file-item">
            <div class="file-info">
                <div class="file-icon">
                    <i class="fas fa-file-pdf"></i>
                </div>
                <div class="file-details">
                    <div class="file-name">${file.name}</div>
                    <div class="file-size">${(file.size / 1024).toFixed(2)} KB</div>
                </div>
            </div>
            <div class="file-status status-${file.status}">
                ${file.status.charAt(0).toUpperCase() + file.status.slice(1)}
            </div>
        </div>
    `).join('');
}

function startParsingAll() {
    const uploadedFiles = JSON.parse(localStorage.getItem('quantumpulse_uploaded_files')) || [];
    const pendingFiles = uploadedFiles.filter(f => f.status === 'pending');
    
    if (pendingFiles.length === 0) {
        showToast('No files to parse', 'warning');
        return;
    }
    
    showToast(`Starting AI parsing for ${pendingFiles.length} files`, 'info');
    
    // Navigate to parse page
    navigateToPage('resume-parse');
}

// ================= RESUME PARSE PAGE =================
function loadResumeParsePage() {
    loadPendingFiles();
}

function loadPendingFiles() {
    const uploadedFiles = JSON.parse(localStorage.getItem('quantumpulse_uploaded_files')) || [];
    const pendingFiles = uploadedFiles.filter(f => f.status === 'pending');
    
    const table = document.getElementById('pendingFilesTable');
    if (!table) return;
    
    table.innerHTML = pendingFiles.map(file => `
        <tr>
            <td><input type="checkbox" class="pending-file-checkbox" data-file-id="${file.id}"></td>
            <td>${file.name}</td>
            <td>${(file.size / 1024).toFixed(2)} KB</td>
            <td>${file.type || 'PDF'}</td>
            <td>${new Date(file.uploadedAt).toLocaleDateString()}</td>
            <td><span class="status-badge status-pending">Pending</span></td>
            <td>
                <button class="btn btn-outline btn-sm" onclick="parseSingleFile('${file.id}')">Parse</button>
            </td>
        </tr>
    `).join('');
}

function parseSingleFile(fileId) {
    const uploadedFiles = JSON.parse(localStorage.getItem('quantumpulse_uploaded_files')) || [];
    const fileIndex = uploadedFiles.findIndex(f => f.id === fileId);
    
    if (fileIndex === -1) return;
    
    // Update status to processing
    uploadedFiles[fileIndex].status = 'processing';
    localStorage.setItem('quantumpulse_uploaded_files', JSON.stringify(uploadedFiles));
    
    // Simulate AI parsing
    setTimeout(() => {
        uploadedFiles[fileIndex].status = 'parsed';
        uploadedFiles[fileIndex].parsedData = {
            name: extractNameFromFileName(uploadedFiles[fileIndex].name),
            email: generateEmailFromFileName(uploadedFiles[fileIndex].name),
            phone: generateRandomPhone(),
            experience: `${Math.floor(Math.random() * 10) + 1} years`,
            skills: ['JavaScript', 'React', 'Node.js', 'Python'].slice(0, Math.floor(Math.random() * 3) + 2),
            education: 'Bachelor\'s Degree in Computer Science',
            workHistory: 'Senior Developer at Tech Corp (2020-Present)'
        };
        
        localStorage.setItem('quantumpulse_uploaded_files', JSON.stringify(uploadedFiles));
        loadPendingFiles();
        showToast('Resume parsed successfully', 'success');
        
        // Add to candidates if auto-import is enabled
        const autoImportToggle = document.getElementById('autoImportToggle');
        if (autoImportToggle?.checked) {
            importParsedToCandidates(uploadedFiles[fileIndex].parsedData, uploadedFiles[fileIndex].name);
        }
    }, 2000);
}

function importParsedToCandidates(parsedData, fileName) {
    const candidateData = {
        id: 'candidate_' + Date.now(),
        name: parsedData.name,
        email: parsedData.email,
        phone: parsedData.phone,
        position: 'Parsed from Resume',
        experience: parsedData.experience,
        skills: parsedData.skills.join(', '),
        status: 'applied',
        source: 'resume_upload',
        appliedDate: new Date().toISOString().split('T')[0],
        resumeFile: fileName
    };
    
    candidates.push(candidateData);
    saveData();
    showToast('Candidate imported from resume', 'success');
}

function startAIParsing() {
    showToast('Starting AI parsing for all files...', 'info');
    
    // Navigate to processing tab
    switchResumeTab('processing');
}

function switchResumeTab(tabName) {
    // Update tabs
    document.querySelectorAll('.resume-tab').forEach(tab => {
        tab.classList.remove('active');
        if (tab.dataset.tab === tabName) {
            tab.classList.add('active');
        }
    });
    
    // Show/hide tab content
    document.querySelectorAll('.resume-tab-content').forEach(content => {
        content.classList.remove('active');
        if (content.id === tabName + 'Tab') {
            content.classList.add('active');
        }
    });
    
    // Load tab data
    switch(tabName) {
        case 'pending':
            loadPendingFiles();
            break;
        case 'completed':
            loadCompletedFiles();
            break;
        // Add other tabs as needed
    }
}

// ================= INTERVIEWS PAGE =================
function loadInterviewsPage() {
    refreshInterviewsList();
    
    // Populate dropdowns in interview form
    populateInterviewFormDropdowns();
}

function refreshInterviewsList() {
    const table = document.getElementById('interviewsListTable');
    if (!table) return;
    
    table.innerHTML = interviews.map(interview => {
        const candidate = candidates.find(c => c.id === interview.candidateId);
        const job = jobs.find(j => j.id === interview.jobId);
        
        return `
        <tr>
            <td>${candidate ? candidate.name : 'Unknown'}</td>
            <td>${job ? job.title : 'Unknown'}</td>
            <td>${interview.date} ${interview.time}</td>
            <td>${interview.interviewer || 'Not specified'}</td>
            <td>${interview.type}</td>
            <td><span class="status-badge status-${interview.status}">${interview.status}</span></td>
            <td>
                <button class="btn btn-outline btn-sm" onclick="editInterview('${interview.id}')">Edit</button>
                <button class="btn btn-outline btn-sm" onclick="startVideoCallInterview('${interview.id}')">Start Call</button>
            </td>
        </tr>
        `;
    }).join('');
}

function showScheduleInterviewModal() {
    populateInterviewFormDropdowns();
    document.getElementById('scheduleInterviewModal').style.display = 'flex';
}

function closeScheduleInterviewModal() {
    document.getElementById('scheduleInterviewModal').style.display = 'none';
}

function populateInterviewFormDropdowns() {
    // Populate candidate dropdown
    const candidateSelect = document.getElementById('interviewCandidate');
    if (candidateSelect) {
        candidateSelect.innerHTML = '<option value="">Select Candidate</option>' +
            candidates.map(c => `<option value="${c.id}">${c.name} (${c.email})</option>`).join('');
    }
    
    // Populate job dropdown
    const jobSelect = document.getElementById('interviewJob');
    if (jobSelect) {
        jobSelect.innerHTML = '<option value="">Select Job</option>' +
            jobs.filter(j => j.status === 'active').map(j => 
                `<option value="${j.id}">${j.title} (${j.code})</option>`
            ).join('');
    }
}

function submitInterviewForm(event) {
    event.preventDefault();
    
    const interviewData = {
        id: 'interview_' + Date.now(),
        candidateId: document.getElementById('interviewCandidate').value,
        jobId: document.getElementById('interviewJob').value,
        date: document.getElementById('interviewDate').value,
        time: document.getElementById('interviewTime').value,
        duration: document.getElementById('interviewDuration').value,
        type: document.getElementById('interviewType').value,
        interviewer: document.getElementById('interviewInterviewers').value,
        status: document.getElementById('interviewStatus').value,
        location: document.getElementById('interviewLocation').value,
        notes: document.getElementById('interviewNotes').value
    };
    
    interviews.push(interviewData);
    saveData();
    
    closeScheduleInterviewModal();
    refreshInterviewsList();
    updateDashboardStats();
    
    showToast('Interview scheduled successfully', 'success');
    return false;
}

// ================= VIDEO CALL FUNCTIONS =================
function startVideoCall() {
    showToast('Starting video call...', 'info');
    document.getElementById('videoCallModal').style.display = 'flex';
}

function endVideoCall() {
    document.getElementById('videoCallModal').style.display = 'none';
    showToast('Call ended', 'info');
}

function startVideoCallInterview(interviewId) {
    const interview = interviews.find(i => i.id === interviewId);
    if (!interview) return;
    
    const candidate = candidates.find(c => c.id === interview.candidateId);
    if (candidate) {
        document.getElementById('callTitle').textContent = `Interview with ${candidate.name}`;
        document.getElementById('remoteParticipantName').textContent = candidate.name;
    }
    
    startVideoCall();
}

// ================= REPORTS PAGE =================
function loadReportsPage() {
    generateReport();
}

function generateReport() {
    const period = document.getElementById('reportPeriod')?.value || 'monthly';
    
    // Demo metrics
    document.getElementById('hiringMetrics').textContent = '4.2/5';
    document.getElementById('sourceMetrics').textContent = 'LinkedIn: 40%';
    document.getElementById('diversityMetrics').textContent = 'A+';
    document.getElementById('costMetrics').textContent = '$4,500';
    
    showToast(`Report generated for ${period} period`, 'success');
}

// ================= SETTINGS PAGE =================
function loadSettingsPage() {
    // Load current settings
    const savedSettings = JSON.parse(localStorage.getItem('quantumpulse_settings')) || {};
    
    // Resume settings
    const aiParsingToggle = document.getElementById('aiParsingToggle');
    if (aiParsingToggle) {
        aiParsingToggle.checked = savedSettings.aiParsing !== false;
        updateAIParsingStatus();
    }
    
    const duplicateDetection = document.getElementById('duplicateDetection');
    if (duplicateDetection) {
        duplicateDetection.checked = savedSettings.duplicateDetection !== false;
        updateDuplicateDetectionStatus();
    }
    
    const autoImportToggle = document.getElementById('autoImportToggle');
    if (autoImportToggle) {
        autoImportToggle.checked = savedSettings.autoImport === true;
        updateAutoImportStatus();
    }
}

function updateAIParsingStatus() {
    const toggle = document.getElementById('aiParsingToggle');
    const status = document.getElementById('aiParsingStatus');
    if (toggle && status) {
        status.textContent = toggle.checked ? 'Enabled' : 'Disabled';
        
        // Save setting
        const settings = JSON.parse(localStorage.getItem('quantumpulse_settings')) || {};
        settings.aiParsing = toggle.checked;
        localStorage.setItem('quantumpulse_settings', JSON.stringify(settings));
    }
}

function updateDuplicateDetectionStatus() {
    const toggle = document.getElementById('duplicateDetection');
    const status = document.getElementById('duplicateDetectionStatus');
    if (toggle && status) {
        status.textContent = toggle.checked ? 'Enabled' : 'Disabled';
        
        // Save setting
        const settings = JSON.parse(localStorage.getItem('quantumpulse_settings')) || {};
        settings.duplicateDetection = toggle.checked;
        localStorage.setItem('quantumpulse_settings', JSON.stringify(settings));
    }
}

function updateAutoImportStatus() {
    const toggle = document.getElementById('autoImportToggle');
    const status = document.getElementById('autoImportStatus');
    if (toggle && status) {
        status.textContent = toggle.checked ? 'Enabled' : 'Disabled';
        
        // Save setting
        const settings = JSON.parse(localStorage.getItem('quantumpulse_settings')) || {};
        settings.autoImport = toggle.checked;
        localStorage.setItem('quantumpulse_settings', JSON.stringify(settings));
    }
}

function toggleSettingsSidebar() {
    const sidebar = document.getElementById('settingsSidebar');
    sidebar.classList.toggle('active');
}

// ================= EVENT LISTENERS =================
function setupEventListeners() {
    // Login tabs
    document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
            e.preventDefault();
            const tab = btn.dataset.tab;
            switchToTab(tab);
        });
    });
    
    // Connect Import button to file input
    const importBtn = document.getElementById('importBtn');
    const candidateImportFile = document.getElementById('candidateImportFile');

    if (importBtn && candidateImportFile) {
        importBtn.addEventListener('click', () => {
            candidateImportFile.click();
        });
        
        candidateImportFile.addEventListener('change', handleCandidateFileImport);
    }
    
    // Menu navigation
    document.querySelectorAll('.menu-item').forEach(item => {
        item.addEventListener('click', () => {
            const page = item.dataset.page;
            navigateToPage(page);
        });
    });
    
    // Mobile menu
    document.getElementById('mobileMenuBtn')?.addEventListener('click', () => {
        document.getElementById('sidebar').classList.add('active');
        document.getElementById('mobileMenuOverlay').classList.add('active');
    });
    
    document.getElementById('closeSidebarBtn')?.addEventListener('click', () => {
        closeMobileMenu();
    });
    
    document.getElementById('mobileMenuOverlay')?.addEventListener('click', () => {
        closeMobileMenu();
    });
    
    // Profile dropdown
    document.querySelector('.user-profile')?.addEventListener('click', (e) => {
        e.stopPropagation();
        toggleProfileDropdown();
    });
    
    // Close dropdowns on outside click
    document.addEventListener('click', () => {
        document.getElementById('profileDropdown')?.classList.remove('visible');
        document.getElementById('notificationsModal')?.classList.remove('active');
    });
    
    // Resume tabs
    document.querySelectorAll('.resume-tab').forEach(tab => {
        tab.addEventListener('click', () => {
            const tabName = tab.dataset.tab;
            switchResumeTab(tabName);
        });
    });
    
    // Settings toggles
    document.getElementById('aiParsingToggle')?.addEventListener('change', updateAIParsingStatus);
    document.getElementById('duplicateDetection')?.addEventListener('change', updateDuplicateDetectionStatus);
    document.getElementById('autoImportToggle')?.addEventListener('change', updateAutoImportStatus);
    
    // Quick action cards
    document.querySelectorAll('.action-card').forEach(card => {
        card.addEventListener('click', function() {
            const action = this.querySelector('h4').textContent;
            handleQuickAction(action);
        });
    });
}

function setupImportEventListeners() {
    // Resume tab switching in import modal
    document.querySelectorAll('#bulkCandidateImportModal .resume-tab').forEach(tab => {
        tab.addEventListener('click', () => {
            const tabName = tab.dataset.tab;
            switchCandidateImportTab(tabName);
        });
    });
    
    // LinkedIn source switching
    document.querySelectorAll('input[name="linkedinSource"]').forEach(radio => {
        radio.addEventListener('change', (e) => {
            const value = e.target.value;
            const csvSection = document.getElementById('linkedinCSVSection');
            if (csvSection) {
                csvSection.style.display = value === 'csv' ? 'block' : 'none';
            }
        });
    });
}

function closeMobileMenu() {
    document.getElementById('sidebar').classList.remove('active');
    document.getElementById('mobileMenuOverlay').classList.remove('active');
}

function toggleProfileDropdown() {
    document.getElementById('profileDropdown').classList.toggle('visible');
}

function toggleNotifications() {
    document.getElementById('notificationsModal').classList.toggle('active');
}

// ================= UTILITY FUNCTIONS =================
function showToast(message, type = 'info') {
    const container = document.getElementById('toastContainer') || (() => {
        const newContainer = document.createElement('div');
        newContainer.className = 'toast-container';
        newContainer.id = 'toastContainer';
        document.body.appendChild(newContainer);
        return newContainer;
    })();
    
    const toast = document.createElement('div');
    toast.className = 'toast';
    
    const icon = type === 'success' ? 'check-circle' : 
                 type === 'error' ? 'exclamation-circle' : 
                 type === 'warning' ? 'exclamation-triangle' : 'info-circle';
    
    toast.innerHTML = `
        <i class="fas fa-${icon}" style="color: ${type === 'success' ? 'var(--success)' : type === 'error' ? 'var(--danger)' : type === 'warning' ? 'var(--warning)' : 'var(--info)'}"></i>
        <span>${message}</span>
    `;
    
    container.appendChild(toast);
    
    // Remove after 5 seconds
    setTimeout(() => {
        toast.style.opacity = '0';
        toast.style.transform = 'translateX(100%)';
        setTimeout(() => toast.remove(), 300);
    }, 5000);
}

function handleQuickAction(action) {
    switch(action) {
        case 'Post New Job':
            navigateToPage('jobs');
            setTimeout(() => showAddJobModal(), 100);
            break;
        case 'Add Candidate':
            navigateToPage('candidates');
            setTimeout(() => showAddCandidateModal(), 100);
            break;
        case 'Upload Resume':
            navigateToPage('resume-upload');
            break;
        case 'Schedule Interview':
            navigateToPage('interviews');
            setTimeout(() => showScheduleInterviewModal(), 100);
            break;
    }
}

// ================= IMPORT/EXPORT FUNCTIONS =================
function extractNameFromFileName(filename) {
    const name = filename
        .replace(/\.[^/.]+$/, '') // Remove extension
        .replace(/[_-]/g, ' ') // Replace underscores and dashes with spaces
        .replace(/\d+/g, '') // Remove numbers
        .trim();
    
    return name || 'Candidate';
}

function generateEmailFromFileName(filename) {
    const name = extractNameFromFileName(filename)
        .toLowerCase()
        .replace(/\s+/g, '.');
    
    return `${name}@example.com`;
}

function generateRandomPhone() {
    return `+1 (555) ${Math.floor(100 + Math.random() * 900)}-${Math.floor(1000 + Math.random() * 9000)}`;
}

// ================= WINDOW EXPORTS =================
window.switchToTab = switchToTab;
window.loginUserDirect = loginUserDirect;
window.logout = logout;
window.navigateToPage = navigateToPage;
window.showAddJobModal = showAddJobModal;
window.closeAddJobModal = closeAddJobModal;
window.submitJobForm = submitJobForm;
window.editJob = editJob;
window.deleteJob = deleteJob;
window.viewJob = viewJob;
window.filterJobs = filterJobs;
window.showAddCandidateModal = showAddCandidateModal;
window.closeAddCandidateModal = closeAddCandidateModal;
window.submitCandidateModalForm = submitCandidateModalForm;
window.viewCandidate = viewCandidate;
window.deleteCandidate = deleteCandidate;
window.filterCandidates = filterCandidates;
window.searchCandidates = searchCandidates;
window.toggleProfileDropdown = toggleProfileDropdown;
window.toggleNotifications = toggleNotifications;
window.closeMobileMenu = closeMobileMenu;
window.startVideoCall = startVideoCall;
window.endVideoCall = endVideoCall;
window.showScheduleInterviewModal = showScheduleInterviewModal;
window.closeScheduleInterviewModal = closeScheduleInterviewModal;
window.submitInterviewForm = submitInterviewForm;
window.handleBulkUpload = handleBulkUpload;
window.startParsingAll = startParsingAll;
window.startAIParsing = startAIParsing;
window.switchResumeTab = switchResumeTab;
window.parseSingleFile = parseSingleFile;
window.toggleSettingsSidebar = toggleSettingsSidebar;

// Demo functions for social login
window.loginWithGoogle = function() {
    currentUser = {
        id: 'google_001',
        name: 'Google User',
        email: 'google@example.com',
        role: 'Google User',
        avatar: 'GU'
    };
    showDashboard();
    showToast('Logged in with Google', 'success');
};

window.loginWithLinkedIn = function() {
    currentUser = {
        id: 'linkedin_001',
        name: 'LinkedIn User',
        email: 'linkedin@example.com',
        role: 'LinkedIn User',
        avatar: 'LU'
    };
    showDashboard();
    showToast('Logged in with LinkedIn', 'success');
};

window.loginWithGitHub = function() {
    currentUser = {
        id: 'github_001',
        name: 'GitHub User',
        email: 'github@example.com',
        role: 'GitHub User',
        avatar: 'GU'
    };
    showDashboard();
    showToast('Logged in with GitHub', 'success');
};

window.enterGuestMode = function() {
    currentUser = {
        id: 'guest_001',
        name: 'Guest User',
        email: 'guest@example.com',
        role: 'Guest',
        avatar: 'GU'
    };
    showDashboard();
    showToast('Welcome as Guest', 'success');
};

window.quickDemoLogin = function() {
    document.getElementById('loginEmail').value = 'admin@quantumpulse.com';
    document.getElementById('loginPassword').value = 'Admin@123';
    loginUserDirect(new Event('submit'));
};

// Import/Export functions
window.showImportJobsModal = function() {
    console.log('Opening import jobs modal');
    document.getElementById('importJobsModal').style.display = 'flex';
    
    // Reset preview
    document.getElementById('jobImportPreview').style.display = 'none';
    document.getElementById('processJobImportBtn').style.display = 'none';
    document.getElementById('jobImportProgress').style.display = 'none';
};

window.closeImportJobsModal = function() {
    document.getElementById('importJobsModal').style.display = 'none';
};

window.handleJobFileImport = function(event) {
    const file = event.target.files[0];
    if (!file) return;
    
    console.log('Processing job file:', file.name);
    
    const reader = new FileReader();
    reader.onload = function(e) {
        try {
            const content = e.target.result;
            let jobsData = [];
            
            if (file.name.endsWith('.csv')) {
                jobsData = parseCSV(content);
            } else if (file.name.endsWith('.json')) {
                jobsData = JSON.parse(content);
            }
            
            // Preview the data
            previewJobImport(jobsData);
            
        } catch (error) {
            console.error('Error parsing file:', error);
            showToast('Error parsing file. Please check format.', 'error');
        }
    };
    
    if (file.name.endsWith('.csv')) {
        reader.readAsText(file);
    } else if (file.name.endsWith('.json')) {
        reader.readAsText(file);
    } else {
        showToast('Unsupported file format', 'error');
    }
};

window.processJobImport = function() {
    if (!jobsToImport || jobsToImport.length === 0) {
        showToast('No jobs to import', 'error');
        return;
    }
    
    const progressContainer = document.getElementById('jobImportProgress');
    const progressFill = document.getElementById('jobImportProgressFill');
    const progressPercent = document.getElementById('jobImportProgressPercent');
    
    // Show progress
    progressContainer.style.display = 'block';
    document.getElementById('processJobImportBtn').style.display = 'none';
    
    let importedCount = 0;
    const total = jobsToImport.length;
    
    // Simulate import process
    const interval = setInterval(() => {
        if (importedCount < total) {
            const job = jobsToImport[importedCount];
            job.id = 'job_' + Date.now() + '_' + importedCount;
            job.postedDate = new Date().toISOString().split('T')[0];
            
            jobs.push(job);
            importedCount++;
            
            // Update progress
            const progress = Math.round((importedCount / total) * 100);
            progressFill.style.width = progress + '%';
            progressPercent.textContent = progress + '%';
        } else {
            clearInterval(interval);
            
            // Save data
            saveData();
            
            // Update UI
            refreshJobsList();
            updateDashboardStats();
            
            // Show success
            showToast(`Successfully imported ${importedCount} jobs`, 'success');
            
            // Close modal after delay
            setTimeout(() => {
                closeImportJobsModal();
                jobsToImport = null;
            }, 1000);
        }
    }, 300);
};

window.downloadJobTemplate = function() {
    const csvContent = `title,code,department,location,type,salary,description
Senior Frontend Developer,DEV-001,Engineering,Remote,full-time,"$120,000 - $150,000","We are looking for an experienced Frontend Developer..."
UI/UX Designer,DES-001,Design,Hybrid,full-time,"$90,000 - $120,000","Looking for a creative UI/UX Designer..."
Backend Developer,DEV-002,Engineering,Remote,full-time,"$130,000 - $160,000","We need a skilled Backend Developer..."
Marketing Manager,MKT-001,Marketing,On-site,full-time,"$80,000 - $110,000","Lead our marketing efforts..."
Sales Executive,SAL-001,Sales,Hybrid,full-time,"$70,000 + commission","Drive sales growth..."`;
    
    const blob = new Blob([csvContent], { type: 'text/csv' });
    const url = window.URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'job_import_template.csv';
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    window.URL.revokeObjectURL(url);
    
    showToast('Template downloaded', 'success');
};

window.downloadJSONTemplate = function() {
    const template = [
        {
            "title": "Senior Frontend Developer",
            "code": "DEV-001",
            "department": "Engineering",
            "location": "Remote",
            "type": "full-time",
            "salary": "$120,000 - $150,000",
            "description": "We are looking for an experienced Frontend Developer..."
        },
        {
            "title": "UI/UX Designer",
            "code": "DES-001",
            "department": "Design",
            "location": "Hybrid",
            "type": "full-time",
            "salary": "$90,000 - $120,000",
            "description": "Looking for a creative UI/UX Designer..."
        }
    ];
    
    const blob = new Blob([JSON.stringify(template, null, 2)], { type: 'application/json' });
    const url = window.URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'job_import_template.json';
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    window.URL.revokeObjectURL(url);
    
    showToast('JSON template downloaded', 'success');
};

window.showBulkCandidateImportModal = function() {
    console.log('Opening bulk candidate import modal');
    document.getElementById('bulkCandidateImportModal').style.display = 'flex';
    
    // Reset tabs
    switchCandidateImportTab('fileImport');
};

window.closeBulkCandidateImportModal = function() {
    document.getElementById('bulkCandidateImportModal').style.display = 'none';
};

window.switchCandidateImportTab = function(tabName) {
    // Update tabs
    document.querySelectorAll('#bulkCandidateImportModal .resume-tab').forEach(tab => {
        tab.classList.remove('active');
        if (tab.dataset.tab === tabName) {
            tab.classList.add('active');
        }
    });
    
    // Show/hide tab content
    document.querySelectorAll('#bulkCandidateImportModal .resume-tab-content').forEach(content => {
        content.classList.remove('active');
        if (content.id === tabName + 'Tab') {
            content.classList.add('active');
        }
    });
};

// ================= CANDIDATE IMPORT HANDLER =================
window.handleCandidateFileImport = function(event) {
    const file = event.target.files[0];
    if (!file) return;
    
    console.log('Processing candidate file:', file.name);
    const ext = file.name.split('.').pop().toLowerCase();
    
    // Check if it's a supported file type
    if (!['csv', 'json', 'pdf', 'doc', 'docx'].includes(ext)) {
        showToast('Unsupported file format. Please upload CSV, JSON, or resume files.', 'error');
        return;
    }
    
    // Process different file types
    if (['pdf', 'doc', 'docx'].includes(ext)) {
        // Process as resume
        processResumeFile(file);
    } else {
        // Process CSV or JSON
        const reader = new FileReader();
        reader.onload = function(e) {
            try {
                let candidatesData = [];
                
                if (ext === 'csv') {
                    candidatesData = parseCandidateCSV(e.target.result);
                } else if (ext === 'json') {
                    candidatesData = JSON.parse(e.target.result);
                }
                
                if (candidatesData.length > 0) {
                    // Create a folder for the imported files
                    createImportFolder(file.name);
                    
                    // Import directly to database
                    importCandidatesDirectly(candidatesData);
                }
                
            } catch (error) {
                console.error('Error parsing file:', error);
                showToast('Error parsing file. Please check format.', 'error');
            }
        };
        
        reader.readAsText(file);
    }
    
    // Reset file input so same file can be selected again
    event.target.value = '';
};

function createImportFolder(filename) {
    // Create a folder structure in localStorage
    const importFolders = JSON.parse(localStorage.getItem('quantumpulse_import_folders')) || [];
    
    const folderName = `Import_${new Date().toISOString().slice(0, 10)}`;
    const folder = {
        id: 'folder_' + Date.now(),
        name: folderName,
        created: new Date().toISOString(),
        files: [filename]
    };
    
    importFolders.push(folder);
    localStorage.setItem('quantumpulse_import_folders', JSON.stringify(importFolders));
    
    console.log(`Created folder: ${folderName} for file: ${filename}`);
}

function importCandidatesDirectly(candidatesData) {
    if (!candidatesData || candidatesData.length === 0) {
        showToast('No valid candidate data found in file', 'warning');
        return;
    }
    
    // Create progress indicator
    const progressDiv = document.createElement('div');
    progressDiv.className = 'import-progress-overlay';
    progressDiv.innerHTML = `
        <div class="import-progress-card">
            <div class="import-progress-header">
                <i class="fas fa-users"></i>
                <h4>Importing Candidates</h4>
            </div>
            <div class="import-progress-body">
                <div class="progress-bar">
                    <div class="progress-fill" id="directProgressFill" style="width: 0%"></div>
                </div>
                <div class="progress-text">
                    <span id="directProgressText">Starting import...</span>
                    <span id="directProgressCount">0/${candidatesData.length}</span>
                </div>
            </div>
        </div>
    `;
    
    document.body.appendChild(progressDiv);
    
    let importedCount = 0;
    const total = candidatesData.length;
    
    // Process each candidate
    const processNextCandidate = () => {
        if (importedCount < total) {
            const candidate = candidatesData[importedCount];
            
            // Generate a unique ID for each candidate
            const candidateId = `candidate_${Date.now()}_${importedCount}`;
            
            // Create candidate object with proper structure
            const newCandidate = {
                id: candidateId,
                name: candidate.name || `Candidate ${importedCount + 1}`,
                email: candidate.email || `candidate${importedCount + 1}@example.com`,
                phone: candidate.phone || '+1 (555) 000-0000',
                position: candidate.position || 'Software Developer',
                experience: candidate.experience || 'Not specified',
                skills: Array.isArray(candidate.skills) ? candidate.skills : 
                       (candidate.skills ? candidate.skills.split(',') : []),
                status: candidate.status || 'applied',
                source: 'file_import',
                appliedDate: candidate.appliedDate || new Date().toISOString().split('T')[0],
                resumeFile: candidate.resumeFile || null,
                notes: candidate.notes || '',
                rating: candidate.rating || 0
            };
            
            // Add to candidates array
            candidates.push(newCandidate);
            importedCount++;
            
            // Update progress
            const progress = Math.round((importedCount / total) * 100);
            const progressFill = document.getElementById('directProgressFill');
            const progressText = document.getElementById('directProgressText');
            const progressCount = document.getElementById('directProgressCount');
            
            if (progressFill) progressFill.style.width = `${progress}%`;
            if (progressText) progressText.textContent = 'Importing candidates...';
            if (progressCount) progressCount.textContent = `${importedCount}/${total}`;
            
            // Continue with next candidate
            setTimeout(processNextCandidate, 100);
        } else {
            // Import complete
            saveData();
            
            // Update UI
            refreshCandidatesList();
            updateDashboardStats();
            
            // Show success message
            setTimeout(() => {
                progressDiv.classList.add('fade-out');
                setTimeout(() => {
                    if (progressDiv.parentNode) {
                        progressDiv.parentNode.removeChild(progressDiv);
                    }
                }, 300);
                
                showToast(`Successfully imported ${importedCount} candidates`, 'success');
                
                // Navigate back to candidates page
                navigateToPage('candidates');
            }, 500);
        }
    };
    
    // Start the import process
    processNextCandidate();
}

// ================= FETCH PAGE INTEGRATION =================
// Function to save fetched candidate to database
window.saveFetchedCandidateToDatabase = function(candidateData) {
    if (!candidateData) {
        showToast('No candidate data to save', 'error');
        return;
    }
    
    // Generate unique ID
    const candidateId = `candidate_${Date.now()}_${candidates.length}`;
    
    // Create complete candidate object
    const newCandidate = {
        id: candidateId,
        name: candidateData.name || '',
        email: candidateData.email || '',
        phone: candidateData.phone || '',
        position: candidateData.position || 'Software Developer',
        experience: candidateData.experience || 'Not specified',
        skills: candidateData.skills || [],
        status: 'applied',
        source: 'fetch_import',
        appliedDate: new Date().toISOString().split('T')[0],
        resumeFile: candidateData.resumeFile || '',
        notes: candidateData.notes || '',
        rating: candidateData.rating || 0,
        linkedin: candidateData.linkedin || '',
        github: candidateData.github || '',
        portfolio: candidateData.portfolio || ''
    };
    
    // Add to candidates array
    candidates.push(newCandidate);
    
    // Save to localStorage
    saveData();
    
    // Update UI
    refreshCandidatesList();
    updateDashboardStats();
    
    // Show success
    showToast('Candidate saved to database successfully', 'success');
    
    // Navigate back to candidates page
    navigateToPage('candidates');
    
    return true;
};

// Helper functions for import
function parseCSV(csvText) {
    const lines = csvText.split('\n');
    const headers = lines[0].split(',').map(h => h.trim().toLowerCase());
    const jobs = [];
    
    for (let i = 1; i < lines.length; i++) {
        if (lines[i].trim()) {
            const values = lines[i].split(',').map(v => v.trim());
            const job = {};
            headers.forEach((header, index) => {
                job[header] = values[index] || '';
            });
            
            // Format job object
            const formattedJob = {
                title: job.title || `Job ${i}`,
                code: job.code || `JOB-${Date.now()}-${i}`,
                department: job.department || 'General',
                location: job.location || 'Remote',
                type: job.type || 'full-time',
                salary: job.salary || 'Negotiable',
                description: job.description || 'No description provided',
                status: 'active',
                applications: 0
            };
            
            jobs.push(formattedJob);
        }
    }
    
    return jobs;
}

function parseCandidateCSV(csvText) {
    const lines = csvText.split('\n');
    const headers = lines[0].split(',').map(h => h.trim().toLowerCase());
    const candidates = [];
    
    for (let i = 1; i < lines.length; i++) {
        if (lines[i].trim()) {
            const values = lines[i].split(',').map(v => v.trim());
            const candidate = {};
            headers.forEach((header, index) => {
                candidate[header] = values[index] || '';
            });
            
            // Format candidate object
            const formattedCandidate = {
                name: candidate.name || `Candidate ${i}`,
                email: candidate.email || `${candidate.name?.toLowerCase().replace(/\s+/g, '.') || 'candidate' + i}@example.com`,
                phone: candidate.phone || '+1 (555) 000-0000',
                position: candidate.position || 'Software Developer',
                experience: candidate.experience || '2-5 years',
                skills: candidate.skills ? candidate.skills.split(',').map(s => s.trim()) : [],
                status: candidate.status || 'applied',
                appliedDate: candidate.applieddate || new Date().toISOString().split('T')[0],
                notes: candidate.notes || '',
                rating: candidate.rating || 0
            };
            
            candidates.push(formattedCandidate);
        }
    }
    
    return candidates;
}

function processResumeFile(file) {
    console.log('Processing resume file:', file.name);
    
    // Create a folder for resume files
    createImportFolder(file.name);
    
    // Simulate AI parsing
    const candidateData = {
        name: extractNameFromFileName(file.name),
        email: generateEmailFromFileName(file.name),
        phone: generateRandomPhone(),
        position: 'Parsed from Resume',
        experience: `${Math.floor(Math.random() * 10) + 1} years`,
        skills: ['JavaScript', 'React', 'Node.js', 'Python'].slice(0, Math.floor(Math.random() * 3) + 2),
        status: 'applied',
        source: 'resume_upload',
        appliedDate: new Date().toISOString().split('T')[0],
        resumeFile: file.name
    };
    
    // Import directly to database
    importCandidatesDirectly([candidateData]);
}

function previewJobImport(jobsData) {
    const previewTable = document.getElementById('jobImportPreviewTable');
    const previewContainer = document.getElementById('jobImportPreview');
    const importCount = document.getElementById('jobImportCount');
    const processBtn = document.getElementById('processJobImportBtn');
    
    if (!jobsData || jobsData.length === 0) {
        showToast('No valid job data found in file', 'error');
        return;
    }
    
    // Update count
    importCount.textContent = jobsData.length;
    
    // Show preview table
    if (previewTable) {
        previewTable.innerHTML = jobsData.slice(0, 5).map(job => `
            <tr>
                <td>${job.code}</td>
                <td>${job.title}</td>
                <td>${job.department}</td>
                <td>${job.location}</td>
            </tr>
        `).join('');
    }
    
    // Show preview and button
    if (previewContainer) previewContainer.style.display = 'block';
    if (processBtn) processBtn.style.display = 'block';
    
    // Store jobs data for import
    jobsToImport = jobsData;
    
    showToast(`${jobsData.length} jobs ready to import`, 'success');
}

function previewCandidateImport(candidatesData, source) {
    const previewTable = document.getElementById('candidateImportPreviewTable');
    const previewContainer = document.getElementById('candidateImportPreview');
    const importCount = document.getElementById('candidateImportCount');
    
    if (!candidatesData || candidatesData.length === 0) {
        showToast('No valid candidate data found', 'error');
        return;
    }
    
    // Update count
    importCount.textContent = candidatesData.length;
    
    // Show preview table
    if (previewTable) {
        previewTable.innerHTML = candidatesData.slice(0, 5).map(candidate => `
            <tr>
                <td>${candidate.name}</td>
                <td>${candidate.email}</td>
                <td>${candidate.phone}</td>
                <td>${candidate.position}</td>
                <td>${candidate.source || source}</td>
            </tr>
        `).join('');
    }
    
    // Show preview
    if (previewContainer) previewContainer.style.display = 'block';
    
    // Store candidates data for import
    candidatesToImport = candidatesData;
    
    showToast(`${candidatesData.length} candidates ready to import`, 'success');
}

window.processCandidateImport = function() {
    if (!candidatesToImport || candidatesToImport.length === 0) {
        showToast('No candidates to import', 'error');
        return;
    }
    
    const progressContainer = document.getElementById('candidateImportProgress');
    const progressFill = document.getElementById('candidateImportProgressFill');
    const progressPercent = document.getElementById('candidateImportProgressPercent');
    const statusText = document.getElementById('candidateImportStatus');
    
    // Show progress
    progressContainer.style.display = 'block';
    const previewContainer = document.getElementById('candidateImportPreview');
    if (previewContainer) previewContainer.style.display = 'none';
    
    let importedCount = 0;
    const total = candidatesToImport.length;
    
    // Simulate import process
    const interval = setInterval(() => {
        if (importedCount < total) {
            const candidate = candidatesToImport[importedCount];
            candidate.id = 'candidate_' + Date.now() + '_' + importedCount;
            
            // Add to candidates array
            candidates.push(candidate);
            importedCount++;
            
            // Update progress
            const progress = Math.round((importedCount / total) * 100);
            if (progressFill) progressFill.style.width = progress + '%';
            if (progressPercent) progressPercent.textContent = progress + '%';
            if (statusText) statusText.textContent = `Imported ${importedCount} of ${total} candidates`;
            
        } else {
            clearInterval(interval);
            
            // Save data
            saveData();
            
            // Update UI
            if (document.getElementById('candidatesPageContent')?.classList.contains('active')) {
                refreshCandidatesList();
            }
            updateDashboardStats();
            
            // Show success
            showToast(`Successfully imported ${importedCount} candidates`, 'success');
            
            // Close modal after delay
            setTimeout(() => {
                closeBulkCandidateImportModal();
                candidatesToImport = null;
            }, 1500);
        }
    }, 500);
};

// Function to refresh candidates list
function refreshCandidatesDisplay() {
    console.log('Refreshing candidates display...');
    
    // Reload from localStorage
    candidates = JSON.parse(localStorage.getItem('quantumpulse_candidates')) || [];
    
    // Update the table
    const table = document.getElementById('candidatesTable');
    if (table) {
        table.innerHTML = candidates.map(candidate => `
            <tr>
                <td>${candidate.id?.substring(0, 8) || 'N/A'}...</td>
                <td>${candidate.name}</td>
                <td>${candidate.email}</td>
                <td>${candidate.position || 'N/A'}</td>
                <td>${candidate.experience || 'N/A'}</td>
                <td><span class="status-badge status-${candidate.status}">${candidate.status}</span></td>
                <td>${candidate.appliedDate}</td>
                <td>
                    <button class="btn btn-outline btn-sm" onclick="viewCandidate('${candidate.id}')">View</button>
                </td>
            </tr>
        `).join('');
    }
    
    // Update dashboard count
    if (document.getElementById('totalCandidates')) {
        document.getElementById('totalCandidates').textContent = candidates.length;
    }
    
    console.log(`Candidates displayed: ${candidates.length}`);
}

// Function called from fetch.html
window.saveFetchedCandidateToDatabase = function(candidateData) {
    console.log('Saving candidate from fetch page:', candidateData);
    
    // Generate ID
    const candidateId = 'candidate_' + Date.now();
    
    // Create candidate object matching your structure
    const newCandidate = {
        id: candidateId,
        name: candidateData.name || 'Candidate from Fetch',
        email: candidateData.email || 'candidate@example.com',
        phone: candidateData.phone || '',
        position: candidateData.position || 'Software Developer',
        experience: candidateData.experience || '',
        status: candidateData.status || 'applied',
        appliedDate: candidateData.appliedDate || new Date().toISOString().split('T')[0],
        source: 'fetch'
    };
    
    // Add to array
    candidates.push(newCandidate);
    
    // Save to localStorage
    saveData();
    
    // Auto-refresh the display
    refreshCandidatesDisplay();
    
    console.log('Candidate saved and display refreshed');
    
    return {
        success: true,
        message: `Candidate "${candidateData.name}" saved successfully!`,
        candidateId: candidateId
    };
};
</script>

</body>
</html>